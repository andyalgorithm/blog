(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{330:function(t,a,s){t.exports=s.p+"assets/img/docker-architecture.b595b80b.svg"},331:function(t,a,s){t.exports=s.p+"assets/img/docker-y-1.c7b66bdf.png"},332:function(t,a,s){t.exports=s.p+"assets/img/docker-y-3.7bca7068.png"},415:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"docker基础-仓库-镜像-容器详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker基础-仓库-镜像-容器详解"}},[t._v("#")]),t._v(" Docker基础 - 仓库，镜像，容器详解")]),t._v(" "),a("blockquote",[a("p",[t._v("本文将从仓库，镜像，容器三个方面讲解常用的docker命令和使用等，对于开发而言这块使用的非常频繁，需要重点掌握。@pdai")])]),t._v(" "),a("ul",[a("li",[t._v("Docker基础 - 仓库，镜像，容器详解\n"),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%BB%93%E5%BA%93%E9%95%9C%E5%83%8F%E5%AE%B9%E5%99%A8%E7%9A%84%E5%85%B3%E7%B3%BB"}},[t._v("仓库，镜像，容器的关系")])]),t._v(" "),a("li",[t._v("Docker 镜像\n"),a("ul",[a("li",[a("a",{attrs:{href:"#%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8"}},[t._v("镜像列表")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9F%A5%E6%89%BE%E9%95%9C%E5%83%8F"}},[t._v("查找镜像")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"}},[t._v("拉取镜像")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"}},[t._v("删除镜像")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9B%B4%E6%96%B0%E9%95%9C%E5%83%8F"}},[t._v("更新镜像")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F"}},[t._v("生成镜像")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE"}},[t._v("镜像标签")])])])]),t._v(" "),a("li",[t._v("Docker 容器\n"),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8"}},[t._v("容器启动")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E6%9F%A5%E7%9C%8B"}},[t._v("容器查看")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%86%8D%E5%90%AF%E5%8A%A8"}},[t._v("容器再启动")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%81%9C%E6%AD%A2%E5%92%8C%E9%87%8D%E5%90%AF"}},[t._v("容器停止和重启")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%E4%B8%8E%E8%BF%9B%E5%85%A5"}},[t._v("后台模式与进入")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5"}},[t._v("容器导出和导入")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%BC%BA%E5%88%B6%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"}},[t._v("强制停止容器")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%B8%85%E7%90%86%E5%81%9C%E6%AD%A2%E7%9A%84%E5%AE%B9%E5%99%A8"}},[t._v("清理停止的容器")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%88%AB%E5%90%8D%E5%8F%8A%E6%93%8D%E4%BD%9C"}},[t._v("容器别名及操作")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97"}},[t._v("容器错误日志")])])])]),t._v(" "),a("li",[t._v("Docker 仓库\n"),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%85%AC%E6%9C%89%E4%BB%93%E5%BA%93"}},[t._v("公有仓库")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"}},[t._v("私有仓库")])])])])])])]),t._v(" "),a("h2",{attrs:{id:"仓库-镜像-容器的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库-镜像-容器的关系"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E4%BB%93%E5%BA%93-%E9%95%9C%E5%83%8F-%E5%AE%B9%E5%99%A8%E7%9A%84%E5%85%B3%E7%B3%BB"}},[t._v("#")]),t._v(" 仓库，镜像，容器的关系")]),t._v(" "),a("blockquote",[a("p",[t._v("我们再回顾下仓库，镜像，容器的关系（这是官网的图）")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(330),alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"docker-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#docker-%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" Docker 镜像")]),t._v(" "),a("p",[t._v("当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载，默认是从 Docker Hub 公共镜像源下载。")]),t._v(" "),a("p",[t._v("下面我们来学 1、管理和使用本地 Docker 主机镜像 2、创建镜像")]),t._v(" "),a("h3",{attrs:{id:"镜像列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像列表"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8"}},[t._v("#")]),t._v(" 镜像列表")]),t._v(" "),a("p",[t._v("我们可以使用 docker images 来列出本地主机上的镜像")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\nhello-world         latest              fce289e99eb9        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" months ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".84kB\n")])])]),a("p",[t._v("各个选项说明:")]),t._v(" "),a("ul",[a("li",[t._v("REPOSITORY：表示镜像的仓库源")]),t._v(" "),a("li",[t._v("TAG：镜像的标签, 同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本")]),t._v(" "),a("li",[t._v("IMAGE ID：镜像ID")]),t._v(" "),a("li",[t._v("CREATED：镜像创建时间")]),t._v(" "),a("li",[t._v("SIZE：镜像大小")])]),t._v(" "),a("h3",{attrs:{id:"查找镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E6%9F%A5%E6%89%BE%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" 查找镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("以查找MySQL的镜像为例：")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("通过Docker Hub 进行查找")]),t._v(", 比如"),a("a",{attrs:{href:"https://hub.docker.com/search?q=mysql&type=image",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/search?q=mysql&type=image在新窗口打开"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("img",{attrs:{src:s(331),alt:"img"}})]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("使用 docker search 命令来搜索镜像")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker search mysql")]),t._v("\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nmysql                             MySQL is a widely used, open-source relation…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9132")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nmariadb                           MariaDB is a community-developed fork of MyS…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3233")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nmysql/mysql-server                Optimized MySQL Server Docker images. Create…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("676")]),t._v("                                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ncentos/mysql-57-centos7           MySQL "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),t._v(" SQL database server                   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("68")]),t._v("\nmysql/mysql-cluster               Experimental MySQL Cluster Docker images. Cr…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("62")]),t._v("\ncenturylink/mysql                 Image containing mysql. Optimized to be link…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("61")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndeitch/mysql-backup               REPLACED"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Please use http://hub.docker.com/r…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nbitnami/mysql                     Bitnami MySQL Docker Image                      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntutum/mysql                       Base "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" image to run a MySQL database se…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),t._v("\nschickling/mysql-backup-s3        Backup MySQL to S3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("supports periodic backup…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nprom/mysqld-exporter                                                              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nlinuxserver/mysql                 A Mysql container, brought to you by LinuxSe…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("\ncentos/mysql-56-centos7           MySQL "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.6")]),t._v(" SQL database server                   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\ncircleci/mysql                    MySQL is a widely used, open-source relation…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\nmysql/mysql-router                MySQL Router provides transparent routing be…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("\narey/mysql-client                 Run a MySQL client from a "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" container      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndataback/mysql-backup             Back up mysql databases to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". anywhere"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\nopenshift/mysql-55-centos7        DEPRECATED: A Centos7 based MySQL v5.5 image…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\nfradelg/mysql-cron-backup         MySQL/MariaDB database backup using "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cron")]),t._v(" tas…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ngenschsa/mysql-employees          MySQL Employee Sample Database                  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndevilbox/mysql                    Retagged MySQL, MariaDB and PerconaDB offici…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nansibleplaybookbundle/mysql-apb   An APB "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" deploys RHSCL MySQL                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\njelastic/mysql                    An image of the MySQL database server mainta…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nmonasca/mysql-init                A minimal decoupled init container "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" mysql    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nwiddpim/mysql-client              Dockerized MySQL Client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" including Curl…   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("                                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("ul",[a("li",[t._v("NAME: 镜像仓库源的名称")]),t._v(" "),a("li",[t._v("DESCRIPTION: 镜像的描述")]),t._v(" "),a("li",[t._v("OFFICIAL: 是否 docker 官方发布")]),t._v(" "),a("li",[t._v("STARS: 类似 Github 里面的 star，表示点赞、喜欢的意思。")]),t._v(" "),a("li",[t._v("AUTOMATED: 自动构建。")])]),t._v(" "),a("h3",{attrs:{id:"拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" 拉取镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("现在拉取搜索出的MySQL")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker pull mysql")]),t._v("\nUsing default tag: latest\nlatest: Pulling from library/mysql\n619014d83c02: Pull complete\n9ced578c3a5f: Pull complete\n731f6e13d8ea: Pull complete\n3c183de42679: Pull complete\n6de69b5c2f3c: Pull complete\n00f0a4086406: Pull complete\n84d93aea836d: Pull complete\nf18efbfd8d76: Pull complete\n012b302865d1: Pull complete\nfe16fd240f59: Pull complete\nca3e793e545e: Pull complete\n51d0f2cb2610: Pull complete\nDigest: sha256:6d0741319b6a2ae22c384a97f4bbee411b01e75f6284af0cce339fee83d7e314\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" mysql:latest\ndocker.io/library/mysql:latest\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\nhello-world         latest              fce289e99eb9        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" months ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".84kB\n")])])]),a("h3",{attrs:{id:"删除镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" 删除镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("是时候删除那个无聊的hello-world镜像了")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker rmi hello-world")]),t._v("\nError response from daemon: conflict: unable to remove repository reference "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello-world"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("must force"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" - container c91b90b18884 is using its referenced image fce289e99eb9\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])])]),a("p",[t._v("发现报错了，这时候主要看两点：要么就是container实例存在，要么存在镜像依赖；")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES\n1a51d2f023c9        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         affectionate_knuth\nc91b90b18884        hello-world         "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" hours ago                         admiring_pare\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker image inspect --format='{{.RepoTags}} {{.Id}} {{.Parent}}' $(docker image ls -q )")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mysql:latest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" sha256:791b6e40940cd550af522eb4ffe995226798204504fe495743445b900e417a51\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ubuntu:latest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" sha256:ccc6e87d482b79dd1645affd958479139486e47191dfe7a997c862d89cd8b4c0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hello-world:latest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e\n")])])]),a("p",[t._v("显然，我们只要删除container即可：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker rm c91b90b18884")]),t._v("\nc91b90b18884\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES\n1a51d2f023c9        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" hours ago                         affectionate_knuth\n")])])]),a("p",[t._v("最后再来删除镜像吧")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker rmi hello-world")]),t._v("\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:9572f7cdcee8591948c2963463447a53466950b3fc15a247fcad1917ca215a2f\nDeleted: sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e\nDeleted: sha256:af0b15c8625bb1938f1d7b17081031f649fd14e6b233688eea3c5483994a66a3\n")])])]),a("h3",{attrs:{id:"更新镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E6%9B%B4%E6%96%B0%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" 更新镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("针对上述ubuntu的镜像，我们能否在里面安装一些软件，然后重新生成一个镜像呢？这就是更新重新commit出一个新的镜像。")])]),t._v(" "),a("p",[t._v("我们先跑一个ubuntu容器实例，同时在里面进行"),a("code",[t._v("apt-get update")]),t._v("更新")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run -it ubuntu:latest")]),t._v("\nroot@0a1556ca3c27:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# apt-get update")]),t._v("\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88.7")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:2 http://archive.ubuntu.com/ubuntu bionic InRelease "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("242")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("88.7")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("74.6")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:5 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("817")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:6 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1344")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:7 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("186")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:8 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.5")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:9 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.3")]),t._v(" MB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:10 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27.5")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:11 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7064")]),t._v(" B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:12 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("818")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:13 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.1")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:14 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1345")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:15 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("41.2")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:16 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1104")]),t._v(" kB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:17 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4252")]),t._v(" B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nGet:18 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2496")]),t._v(" B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nFetched "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17.6")]),t._v(" MB "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 10s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1759")]),t._v(" kB/s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nReading package lists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". Done\nroot@0a1556ca3c27:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),a("p",[t._v("此时 ID 为 0a1556ca3c27 的容器，是按我们的需求更改的容器。我们可以通过命令 docker commit 来提交容器副本：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# docker commit -m="update test" -a="pdai" 0a1556ca3c27  pdai/ubuntu:v1.0.1')]),t._v("\nsha256:b51e9f5f98cdb5b95c34181148ed7029f0150618aa8cd0e916b10b6aea1bd4c9\n")])])]),a("p",[t._v("可以看到已经生成成功, 且镜像的大小不一样了：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v1.0.1              b51e9f5f98cd        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" seconds ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".1MB\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])]),a("h3",{attrs:{id:"生成镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成镜像"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F"}},[t._v("#")]),t._v(" 生成镜像")]),t._v(" "),a("blockquote",[a("p",[t._v("那如果是生成一个全新的镜像呢？我们使用命令 docker build ，通过创建一个 Dockerfile 文件，其中包含一组指令来告诉 Docker 如何构建我们的镜像。")])]),t._v(" "),a("p",[t._v("这里特意指定的Base镜像为上一步修改生成的"),a("code",[t._v("pdai/ubuntu:v1.0.1")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("FROM    pdai/ubuntu:v1.0.1\nMAINTAINER      pdai "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pdai.tech"')]),t._v("\n\nRUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root:123456'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("chpasswd\nRUN     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" pdai\nRUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pdai:123456'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("chpasswd\nRUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LANG='),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("en_US.UTF-8"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/default/local\nEXPOSE  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\nEXPOSE  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\nCMD     /usr/sbin/sshd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n")])])]),a("p",[a("strong",[t._v("稍微解释下")]),t._v("：这一部分在开发中会用到比较多，所以单独一个章节详解："),a("a",{attrs:{href:""}},[t._v("Docker基础 - dockerfile详解")])]),t._v(" "),a("ul",[a("li",[t._v("每一个指令都会在镜像上创建一个新的层，每一个指令的前缀都必须是大写的。")]),t._v(" "),a("li",[t._v("第一条FROM，指定使用哪个镜像源")]),t._v(" "),a("li",[t._v("RUN 指令告诉docker 在镜像内执行命令，安装了什么。。。")]),t._v(" "),a("li",[t._v("我们使用 Dockerfile 文件，通过 docker build 命令来构建一个镜像。")])]),t._v(" "),a("p",[t._v("接下来生成镜像：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai docker-test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker build -t pdai/ubuntu:v2.0.1 .")]),t._v("\nSending build context to Docker daemon  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".048kB\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" FROM    pdai/ubuntu:v1.0.1\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b51e9f5f98cd\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" MAINTAINER      pdai "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pdai.tech"')]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" af026ee229ea\nRemoving intermediate container af026ee229ea\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 0e961cb557c9\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" RUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root:123456'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("chpasswd\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 96bd9c40c55e\nRemoving intermediate container 96bd9c40c55e\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 9e8549720043\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" RUN     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" pdai\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 0117278f243c\nRemoving intermediate container 0117278f243c\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 87c478df56da\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" RUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pdai:123456'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("chpasswd\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" e0381eabe71a\nRemoving intermediate container e0381eabe71a\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 84fd07f978ae\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" RUN     /bin/echo "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LANG='),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("en_US.UTF-8"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/default/local\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 8d0052d9921f\nRemoving intermediate container 8d0052d9921f\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 3ed0b248224c\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" EXPOSE  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 4b5d540567cd\nRemoving intermediate container 4b5d540567cd\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" c0a72ad140dd\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" EXPOSE  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" c9620707d038\nRemoving intermediate container c9620707d038\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" df42b714ecc1\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("/9 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" CMD     /usr/sbin/sshd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" e178826b43fe\nRemoving intermediate container e178826b43fe\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" a733d5a264b5\nSuccessfully built a733d5a264b5\nSuccessfully tagged pdai/ubuntu:v2.0.1\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("-t")]),t._v(" ：指定要创建的目标镜像名")]),t._v(" "),a("li",[a("code",[t._v(".")]),t._v(" ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径")])]),t._v(" "),a("p",[t._v("使用docker images 查看创建的镜像已经在列表中存在,镜像ID为a733d5a264b5")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai docker-test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.1              a733d5a264b5        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" minutes ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" hours ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".1MB\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])]),a("p",[t._v("我们可以使用新的镜像来创建容器")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai docker-test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run -it pdai/ubuntu:v2.0.1 /bin/bash")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# id pdai")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("groups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),a("p",[t._v("从上面看到新镜像已经包含我们创建的用户 pdai。")]),t._v(" "),a("h3",{attrs:{id:"镜像标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像标签"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE"}},[t._v("#")]),t._v(" 镜像标签")]),t._v(" "),a("blockquote",[a("p",[t._v("设置镜像的Tag，类似于Git中tag？我们可以使用 docker tag 命令，为镜像添加一个新的标签")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker tag a733d5a264b5 pdai/ubuntu:v3.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.1              a733d5a264b5        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" minutes ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" minutes ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" hours ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".1MB\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])]),a("p",[t._v("注意：")]),t._v(" "),a("ul",[a("li",[t._v("docker tag 镜像ID，这里是 a733d5a264b5 ,用户名称、镜像源名(repository name)和新的标签名(tag)。")]),t._v(" "),a("li",[t._v("使用 docker images 命令可以看到，ID为a733d5a264b5的镜像多一个v3.0.1标签。")])]),t._v(" "),a("h3",{attrs:{id:"镜像导出和导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像导出和导入"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E9%95%9C%E5%83%8F%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5"}},[t._v("#")]),t._v(" 镜像导出和导入")]),t._v(" "),a("blockquote",[a("p",[t._v("区别于容器的导出和导入")])]),t._v(" "),a("ul",[a("li",[t._v("镜像导出")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\ndockREPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu                  v2.0.2              57544a04cd1a        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" months ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91")]),t._v(".5MB\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker save > pdai-ubuntu-v2.0.2.tar 57544a04cd1a")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll | grep pdai-u")]),t._v("\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("93898240")]),t._v(" Jun  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 09:06 pdai-ubuntu-v2.0.2.tar\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])]),a("ul",[a("li",[t._v("镜像导入")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" load "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" pdai-ubuntu-v2.0.2.tar\n")])])]),a("p",[t._v("其中"),a("code",[t._v("-i")]),t._v("或者"),a("code",[t._v("<")]),t._v("表示从文件输入。会成功导入镜像及相关元数据，包括tag信息")]),t._v(" "),a("blockquote",[a("p",[t._v("可以依据具体使用场景来选择命令")])]),t._v(" "),a("ul",[a("li",[t._v("若是只想备份images，使用save、load即可")]),t._v(" "),a("li",[t._v("若是在启动容器后，容器内容有变化，需要备份，则使用export、import")])]),t._v(" "),a("h2",{attrs:{id:"docker-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#docker-%E5%AE%B9%E5%99%A8"}},[t._v("#")]),t._v(" Docker 容器")]),t._v(" "),a("blockquote",[a("p",[t._v("上面已经展示了部分容器的使用命令了，这里会在此基础上进行拓展")])]),t._v(" "),a("h3",{attrs:{id:"容器启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器启动"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8"}},[t._v("#")]),t._v(" 容器启动")]),t._v(" "),a("p",[t._v("首先我们是可以这样启动容器的：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai docker-test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run -it pdai/ubuntu:v2.0.1 /bin/bash")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# id pdai")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("groups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("-it")]),t._v(" 可以连写的，表示 "),a("code",[t._v("-i -t")])]),t._v(" "),a("li",[a("code",[t._v("-t")]),t._v(": 在新容器内指定一个伪终端或终端。")]),t._v(" "),a("li",[a("code",[t._v("-i")]),t._v(": 允许你对容器内的标准输入 (STDIN) 进行交互")])]),t._v(" "),a("h3",{attrs:{id:"容器查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器查看"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E6%9F%A5%E7%9C%8B"}},[t._v("#")]),t._v(" 容器查看")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("-a")]),t._v(" 表示 all，所有的")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                      PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" minutes ago                       jolly_kepler\n0a1556ca3c27        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                         affectionate_knuth\n")])])]),a("h3",{attrs:{id:"容器再启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器再启动"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%86%8D%E5%90%AF%E5%8A%A8"}},[t._v("#")]),t._v(" 容器再启动")]),t._v(" "),a("blockquote",[a("p",[t._v("我们看到，刚才"),a("code",[t._v("pdai/ubuntu:v2.0.1")]),t._v("的实例"),a("code",[t._v("f5332ebce695")]),t._v("已经停止了"),a("code",[t._v("Exited (0) 20 minutes ago")]),t._v("，我们能否再启这个实例？")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker start f5332ebce695")]),t._v("\nf5332ebce695\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" seconds        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n")])])]),a("h3",{attrs:{id:"容器停止和重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器停止和重启"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%81%9C%E6%AD%A2%E5%92%8C%E9%87%8D%E5%90%AF"}},[t._v("#")]),t._v(" 容器停止和重启")]),t._v(" "),a("blockquote",[a("p",[t._v("我们将上述容器停止，再重启")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker stop f5332ebce695")]),t._v("\nf5332ebce695\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker restart f5332ebce695")]),t._v("\nf5332ebce695\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                      PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),t._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" seconds                "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n0a1556ca3c27        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         affectionate_knuth\n")])])]),a("h3",{attrs:{id:"后台模式与进入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后台模式与进入"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%E4%B8%8E%E8%BF%9B%E5%85%A5"}},[t._v("#")]),t._v(" 后台模式与进入")]),t._v(" "),a("blockquote",[a("p",[t._v("在使用 -d 参数时，容器启动后会进入后台, 如何进入容器呢？")])]),t._v(" "),a("ul",[a("li",[t._v("第一种："),a("code",[t._v("docker attach")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),t._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" seconds        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker attach f5332ebce695")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'pdai'")]),t._v("\npdai\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])])]),a("p",[t._v("看到没，使用"),a("code",[t._v("docker attach")]),t._v("进入后，exit便容器也停止了。")]),t._v(" "),a("ul",[a("li",[t._v("第二种："),a("code",[t._v("docker exec")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker exec -it f5332ebce695 /bin/bash")]),t._v("\nError response from daemon: Container f5332ebce69520fba353f035ccddd4bd42055fbd1e595f916ba7233e26476464 is not running\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker restart f5332ebce695")]),t._v("\nf5332ebce695\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker exec -it f5332ebce695 /bin/bash")]),t._v("\nroot@f5332ebce695:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" seconds        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n")])])]),a("p",[t._v("注意：")]),t._v(" "),a("ul",[a("li",[t._v("我特意在容器停止状态下执行了"),a("code",[t._v("docker exec")]),t._v("，是让你看到"),a("code",[t._v("docker exec")]),t._v("是在容器启动状态下用的，且注意下错误信息；")]),t._v(" "),a("li",[t._v("推荐大家使用 "),a("code",[t._v("docker exec")]),t._v(" 命令，因为此退出容器终端，不会导致容器的停止。")])]),t._v(" "),a("h3",{attrs:{id:"容器导出和导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器导出和导入"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5"}},[t._v("#")]),t._v(" 容器导出和导入")]),t._v(" "),a("blockquote",[a("p",[t._v("在生产环境中，很多时候是无法连接外网的，所以有时候需要用到容器的导入和导出。")])]),t._v(" "),a("ul",[a("li",[t._v("容器的导出")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" seconds        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker export f5332ebce695 > ubuntu-pdai-v2.tar")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\n-rw-rw-r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("93891072")]),t._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" 09:42 ubuntu-pdai-v2.tar\n")])])]),a("p",[t._v("同时你可以发现，导出容器的时候，容器无需关闭。")]),t._v(" "),a("ul",[a("li",[t._v("容器导入")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker import ubuntu-pdai-v2.tar pdai/ubuntu:v2.0.2")]),t._v("\nsha256:57544a04cd1ad330371ca9142184ff031dc2b6df70df177994477c08fe547b25\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.2              57544a04cd1a        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" seconds ago       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91")]),t._v(".5MB\npdai/ubuntu         v2.0.1              a733d5a264b5        About an hour ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        About an hour ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" hours ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".1MB\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])]),a("p",[t._v("注意看，SIZE可能是不一样的。")]),t._v(" "),a("h3",{attrs:{id:"强制停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制停止容器"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%BC%BA%E5%88%B6%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"}},[t._v("#")]),t._v(" 强制停止容器")]),t._v(" "),a("blockquote",[a("p",[t._v("能否强制删除一个正在运行的容器呢？")])]),t._v(" "),a("p",[t._v("显然，加上"),a("code",[t._v("-f")]),t._v("之后是允许的。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         About an hour ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" minutes       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("/tcp      jolly_kepler\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker rm -f f5332ebce695")]),t._v("\nf5332ebce695\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES\n0a1556ca3c27        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         affectionate_knuth\n")])])]),a("h3",{attrs:{id:"清理停止的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清理停止的容器"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E6%B8%85%E7%90%86%E5%81%9C%E6%AD%A2%E7%9A%84%E5%AE%B9%E5%99%A8"}},[t._v("#")]),t._v(" 清理停止的容器")]),t._v(" "),a("blockquote",[a("p",[t._v("我们看到上面还有好几个容器出于停止状态，能不能删除它们呢？")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES\n0a1556ca3c27        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/sh -c \'while t…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/echo \'Hello wo…"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" hours ago                         affectionate_knuth\n")])])]),a("p",[t._v("清理停止的容器: "),a("code",[t._v("docker container prune")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker container prune")]),t._v("\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" This will remove all stopped containers.\nAre you sure you want to continue? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" y\nDeleted Containers:\n0a1556ca3c275cc692ecd6d19caed4c5be42578f81b3dfea52b24208790d160a\n1a51d2f023c947f2be2d9a78eb863e854ca302c89bf354654c409e23e7dd25d7\n414bf796cbe403e01b5414f2b6232c6a037af78deee4581f4935c94859b5164e\n512061ebfa4c340eb03833e54d77052e33fb62cd42ab7dd7e09bf0b02a761552\naa5e9ae5e5db1760bdb8c7ddb92e4293cd7b4736be7e97314f3ef44a71bf8930\n\nTotal reclaimed space: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(".93MB\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])])]),a("h3",{attrs:{id:"容器别名及操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器别名及操作"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E5%88%AB%E5%90%8D%E5%8F%8A%E6%93%8D%E4%BD%9C"}},[t._v("#")]),t._v(" 容器别名及操作")]),t._v(" "),a("blockquote",[a("p",[t._v("我们上述对容器的操作都是针对容器ID，这个ID是随机的，能否添加一个name对我们自己设置的name操作呢？")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run -itd --name pdai-ubuntu-202 pdai/ubuntu:v2.0.2 /bin/bash")]),t._v("\n11de9755a08402d963d263a559a7daf48f4a2188398f258641240b5eb50fbc89\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps")]),t._v("\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\n11de9755a084        pdai/ubuntu:v2.0.2   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" seconds ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" seconds                            pdai-ubuntu-202\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker stop pdai-ubuntu-202")]),t._v("\npdai-ubuntu-202\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker ps -a")]),t._v("\nCONTAINER ID        IMAGE                COMMAND              CREATED              STATUS                     PORTS               NAMES\n11de9755a084        pdai/ubuntu:v2.0.2   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/bin/bash"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v(" seconds ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" seconds ago                       pdai-ubuntu-202   \n")])])]),a("h3",{attrs:{id:"容器错误日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器错误日志"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%AE%B9%E5%99%A8%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97"}},[t._v("#")]),t._v(" 容器错误日志")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("例：实时查看docker容器名为user-uat的最后10行日志\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tail")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" user-uat\n\n例：查看指定时间后的日志，只显示最后100行：\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-02-08"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tail")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" user-uat\n\n例：查看最近30分钟的日志:\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),t._v(" 30m user-uat\n\n例：查看某时间之后的日志：\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-02-08T13:23:37"')]),t._v(" user-uat\n\n例：查看某时间段日志：\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-02-08T13:23:37"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--until")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-02-09T12:23:37"')]),t._v(" user-uat\n\n例：将错误日志写入文件：\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--since")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-02-18"')]),t._v(" user-uat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" logs_error.txt\n")])])]),a("h2",{attrs:{id:"docker-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-仓库"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#docker-%E4%BB%93%E5%BA%93"}},[t._v("#")]),t._v(" Docker 仓库")]),t._v(" "),a("p",[t._v("仓库（Repository）是集中存放镜像的地方，它和我们的Maven仓库是一样的。以下介绍一下 Docker Hub。当然不止 docker hub，只是远程的服务商不一样，操作都是一样的。")]),t._v(" "),a("ul",[a("li",[t._v("可以采用共有的仓库，也可以自己搭建Docker Registry;")]),t._v(" "),a("li",[t._v("如果之前有自己的Artifactory或者Nexus，它们同样可以支持Docker Registry功能;")]),t._v(" "),a("li",[t._v("带界面的也可以使用Harbor等;")])]),t._v(" "),a("h3",{attrs:{id:"公有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#公有仓库"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"#%E5%85%AC%E6%9C%89%E4%BB%93%E5%BA%93"}},[t._v("#")]),t._v(" 公有仓库")]),t._v(" "),a("blockquote",[a("p",[t._v("我们以官方的docker hub为例，进行注册和理解。很多人会说官方的速度极慢或者私有仓库上传慢，不试试你怎么知道呢？")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("注册官方docker hub")]),t._v("，最新的名字叫docker cloud")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/在新窗口打开"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("我注册的用户名是 realpdai")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("本地登录")]),t._v("刚才注册的账户")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker login")]),t._v("\nLogin with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" over to https://hub.docker.com to create one.\nUsername: realpdai\nPassword:\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Your password will be stored unencrypted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#credentials-store")]),t._v("\n\nLogin Succeeded\n")])])]),a("ul",[a("li",[a("strong",[t._v("镜像准备")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker tag pdai/ubuntu:v2.0.2 realpdai/ubuntu:v2.0.2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker images")]),t._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.2              57544a04cd1a        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" hours ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91")]),t._v(".5MB\nrealpdai/ubuntu     v2.0.2              57544a04cd1a        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" hours ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91")]),t._v(".5MB\npdai/ubuntu         v2.0.1              a733d5a264b5        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" hours ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" hours ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" hours ago        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92")]),t._v(".1MB\nmysql               latest              791b6e40940c        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" weeks ago         465MB\nubuntu              latest              ccc6e87d482b        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])]),a("ul",[a("li",[t._v("推送至Docker Hub服务器")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@pdai ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker push realpdai/ubuntu:v2.0.2")]),t._v("\nThe push refers to repository "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("docker.io/realpdai/ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n9a2c43cbe02a: Pushed\nv2.0.2: digest: sha256:4afd82dd05d0b4a340ae4f4129dcbd63136b5ec7ff92edf313108a41fb0947e0 size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("528")]),t._v("\n")])])]),a("p",[t._v("从推送的速度来看，大概是1.5MB/s。")]),t._v(" "),a("ul",[a("li",[t._v("服务器端查看")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(332),alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://pdai.tech/md/devops/docker/docker-03-basic2.html#%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93",target:"_blank",rel:"noopener noreferrer"}},[t._v("#"),a("OutboundLink")],1),t._v("私有仓库")]),t._v(" "),a("p",[t._v("这里请参考后续的章节。")])])}),[],!1,null,null,null);a.default=n.exports}}]);