<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux - ab压力测试 | Java 全栈知识体系</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/blog/images/favorite.ico">
    <meta name="description" content="对我妻子的爱是让我不断前进的动力，使我的人生少了一份恐惧，多了一份勇气。愿[执子之手, 与子偕老  To: LQ] ">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6822ba10.css" as="style"><link rel="preload" href="/blog/assets/js/app.ba0a3011.js" as="script"><link rel="preload" href="/blog/assets/js/4.a5b48594.js" as="script"><link rel="preload" href="/blog/assets/js/57.6b65606f.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.911987ed.js"><link rel="prefetch" href="/blog/assets/js/11.8c13b615.js"><link rel="prefetch" href="/blog/assets/js/12.b17d390e.js"><link rel="prefetch" href="/blog/assets/js/13.7109526b.js"><link rel="prefetch" href="/blog/assets/js/14.e4ce975e.js"><link rel="prefetch" href="/blog/assets/js/15.da7d650d.js"><link rel="prefetch" href="/blog/assets/js/16.9635a830.js"><link rel="prefetch" href="/blog/assets/js/17.7d32a3b3.js"><link rel="prefetch" href="/blog/assets/js/18.fdb5b421.js"><link rel="prefetch" href="/blog/assets/js/19.420c5e02.js"><link rel="prefetch" href="/blog/assets/js/2.3871e21e.js"><link rel="prefetch" href="/blog/assets/js/20.39a01f59.js"><link rel="prefetch" href="/blog/assets/js/21.4db56d7a.js"><link rel="prefetch" href="/blog/assets/js/22.a662eef6.js"><link rel="prefetch" href="/blog/assets/js/23.732a383c.js"><link rel="prefetch" href="/blog/assets/js/24.ec41e443.js"><link rel="prefetch" href="/blog/assets/js/25.860071a5.js"><link rel="prefetch" href="/blog/assets/js/26.8c4d2716.js"><link rel="prefetch" href="/blog/assets/js/27.11da77fc.js"><link rel="prefetch" href="/blog/assets/js/28.b487366d.js"><link rel="prefetch" href="/blog/assets/js/29.1803ef74.js"><link rel="prefetch" href="/blog/assets/js/3.51bdab14.js"><link rel="prefetch" href="/blog/assets/js/30.d02fbbe4.js"><link rel="prefetch" href="/blog/assets/js/31.56444d1d.js"><link rel="prefetch" href="/blog/assets/js/32.2a36d03a.js"><link rel="prefetch" href="/blog/assets/js/33.3725c3e0.js"><link rel="prefetch" href="/blog/assets/js/34.5f4e3aa4.js"><link rel="prefetch" href="/blog/assets/js/35.ef73c3f8.js"><link rel="prefetch" href="/blog/assets/js/36.fe990cea.js"><link rel="prefetch" href="/blog/assets/js/37.47682786.js"><link rel="prefetch" href="/blog/assets/js/38.baebdf75.js"><link rel="prefetch" href="/blog/assets/js/39.00ea206a.js"><link rel="prefetch" href="/blog/assets/js/40.23ec2501.js"><link rel="prefetch" href="/blog/assets/js/41.2daf7c45.js"><link rel="prefetch" href="/blog/assets/js/42.c6d1131e.js"><link rel="prefetch" href="/blog/assets/js/43.c9d5a03a.js"><link rel="prefetch" href="/blog/assets/js/44.cdc6a286.js"><link rel="prefetch" href="/blog/assets/js/45.902028e9.js"><link rel="prefetch" href="/blog/assets/js/46.553ccd2d.js"><link rel="prefetch" href="/blog/assets/js/47.f3680de2.js"><link rel="prefetch" href="/blog/assets/js/48.b3656314.js"><link rel="prefetch" href="/blog/assets/js/49.9e76608b.js"><link rel="prefetch" href="/blog/assets/js/5.a5abfe4e.js"><link rel="prefetch" href="/blog/assets/js/50.0cda1225.js"><link rel="prefetch" href="/blog/assets/js/51.84ebc08f.js"><link rel="prefetch" href="/blog/assets/js/52.943ab0ec.js"><link rel="prefetch" href="/blog/assets/js/53.81a3ff5a.js"><link rel="prefetch" href="/blog/assets/js/54.68037e26.js"><link rel="prefetch" href="/blog/assets/js/55.8ed30271.js"><link rel="prefetch" href="/blog/assets/js/56.ed07b1e0.js"><link rel="prefetch" href="/blog/assets/js/58.396c2826.js"><link rel="prefetch" href="/blog/assets/js/59.396cafd6.js"><link rel="prefetch" href="/blog/assets/js/6.896d3ff4.js"><link rel="prefetch" href="/blog/assets/js/60.7468b775.js"><link rel="prefetch" href="/blog/assets/js/61.15e652da.js"><link rel="prefetch" href="/blog/assets/js/62.a3b62be1.js"><link rel="prefetch" href="/blog/assets/js/63.6341c331.js"><link rel="prefetch" href="/blog/assets/js/64.5ad96112.js"><link rel="prefetch" href="/blog/assets/js/65.c8815d96.js"><link rel="prefetch" href="/blog/assets/js/66.220d8298.js"><link rel="prefetch" href="/blog/assets/js/67.8f678d56.js"><link rel="prefetch" href="/blog/assets/js/68.86e3017e.js"><link rel="prefetch" href="/blog/assets/js/69.a732f6b2.js"><link rel="prefetch" href="/blog/assets/js/7.486b913b.js"><link rel="prefetch" href="/blog/assets/js/70.873d407a.js"><link rel="prefetch" href="/blog/assets/js/71.e40010a4.js"><link rel="prefetch" href="/blog/assets/js/72.aef34e7f.js"><link rel="prefetch" href="/blog/assets/js/73.34cb7bbc.js"><link rel="prefetch" href="/blog/assets/js/74.711ea49d.js"><link rel="prefetch" href="/blog/assets/js/75.1d427b3f.js"><link rel="prefetch" href="/blog/assets/js/8.3ff4efcd.js"><link rel="prefetch" href="/blog/assets/js/9.31831817.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6822ba10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/logo.png" alt="Java 全栈知识体系" class="logo"> <span class="site-name can-hide">Java 全栈知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable router-link-active"><span>首页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/全栈知识体系总览.html" class="sidebar-link">全栈知识体系总览</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/部署与工具" class="sidebar-heading clickable open"><span>部署与工具</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/工具和资源/" class="sidebar-heading clickable"><span>工具和资源</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/blog/部署与工具/常用开发工具详解" class="sidebar-heading clickable"><span>常用开发工具详解</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/部署与工具/常用开发工具详解/01 Git详解.html" class="sidebar-link">Git详解</a></li><li><a href="/blog/部署与工具/常用开发工具详解/02 Eclipse STS IDEA.html" class="sidebar-link">Eclipse STS IDEA</a></li><li><a href="/blog/部署与工具/常用开发工具详解/03 Maven项目构建.html" class="sidebar-link">Maven项目构建</a></li><li><a href="/blog/部署与工具/常用开发工具详解/04 Maven私有仓库Nexus.html" class="sidebar-link">Maven私有仓库Nexus</a></li><li><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html" class="sidebar-link">Jenkins+Github</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Linux相关/" class="sidebar-heading clickable open"><span>Linux相关</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/部署与工具/Linux相关/01 Linux基础知识.html" class="sidebar-link">Linux基础知识</a></li><li><a href="/blog/部署与工具/Linux相关/02 零拷贝技术.html" class="sidebar-link">零拷贝技术</a></li><li><a href="/blog/部署与工具/Linux相关/03 Linux常用.html" class="sidebar-link">Linux常用</a></li><li><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html" class="active sidebar-link">ab压力测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#ab的简介" class="sidebar-link">[#](#ab的简介) ab的简介</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#ab的原理" class="sidebar-link">[#](#ab的原理) ab的原理</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#ab的安装" class="sidebar-link">[#](#ab的安装) ab的安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#ab的参数说明" class="sidebar-link">[#](#ab的参数说明) ab的参数说明</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#性能指标" class="sidebar-link">[#](#性能指标) 性能指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#吞吐量-requests-per-second" class="sidebar-link">[#](#吞吐量-requests-per-second) 吞吐量（Requests per second）</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#并发连接数-the-number-of-concurrent-connections" class="sidebar-link">[#](#并发连接数-the-number-of-concurrent-connections) 并发连接数（The number of concurrent connections）</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#并发用户数-concurrency-level" class="sidebar-link">[#](#并发用户数-concurrency-level) 并发用户数（Concurrency Level）</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#用户平均请求等待时间-time-per-request" class="sidebar-link">[#](#用户平均请求等待时间-time-per-request) 用户平均请求等待时间（Time per request）</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#服务器平均请求等待时间-time-per-request-across-all-concurrent-requests" class="sidebar-link">[#](#服务器平均请求等待时间-time-per-request-across-all-concurrent-requests) 服务器平均请求等待时间（Time per request:across all concurrent requests）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#ab的应用" class="sidebar-link">[#](#ab的应用) ab的应用</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Linux相关/04 ab压力测试.html#文章来源" class="sidebar-link">[#](#文章来源) 文章来源</a></li></ul></li><li><a href="/blog/部署与工具/Linux相关/05 内存分析工具pmap.html" class="sidebar-link">内存分析工具pmap</a></li><li><a href="/blog/部署与工具/Linux相关/06 Curl使用.html" class="sidebar-link">Curl使用</a></li><li><a href="/blog/部署与工具/Linux相关/07 Linux创建自建服务.html" class="sidebar-link">Linux创建自建服务</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Docker相关/" class="sidebar-heading clickable"><span>Docker相关</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux-ab压力测试"><a href="#linux-ab压力测试" class="header-anchor">#</a> Linux - ab压力测试</h1> <blockquote><p>ab是apachebench命令的缩写, apache自带的压力测试工具。ab非常实用，它不仅可以对apache服务器进行网站访问压力测试，也可以对或其它类型的服务器进行压力测试。</p></blockquote> <ul><li>Linux - ab压力测试
<ul><li><a href="#ab%E7%9A%84%E7%AE%80%E4%BB%8B">ab的简介</a></li> <li><a href="#ab%E7%9A%84%E5%8E%9F%E7%90%86">ab的原理</a></li> <li>ab的安装
<ul><li><a href="#ab%E7%9A%84%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">ab的参数说明</a></li></ul></li> <li>性能指标
<ul><li><a href="#%E5%90%9E%E5%90%90%E9%87%8Frequests-per-second">吞吐量（Requests per second）</a></li> <li><a href="#%E5%B9%B6%E5%8F%91%E8%BF%9E%E6%8E%A5%E6%95%B0the-number-of-concurrent-connections">并发连接数（The number of concurrent connections）</a></li> <li><a href="#%E5%B9%B6%E5%8F%91%E7%94%A8%E6%88%B7%E6%95%B0concurrency-level">并发用户数（Concurrency Level）</a></li> <li><a href="#%E7%94%A8%E6%88%B7%E5%B9%B3%E5%9D%87%E8%AF%B7%E6%B1%82%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4time-per-request">用户平均请求等待时间（Time per request）</a></li> <li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B3%E5%9D%87%E8%AF%B7%E6%B1%82%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4time-per-requestacross-all-concurrent-requests">服务器平均请求等待时间（Time per request:across all concurrent requests）</a></li></ul></li> <li><a href="#ab%E7%9A%84%E5%BA%94%E7%94%A8">ab的应用</a></li> <li><a href="#%E6%96%87%E7%AB%A0%E6%9D%A5%E6%BA%90">文章来源</a></li></ul></li></ul> <h2 id="ab的简介"><a href="#ab的简介" class="header-anchor">#</a> <a href="#ab%E7%9A%84%E7%AE%80%E4%BB%8B">#</a> ab的简介</h2> <p>ab是apachebench命令的缩写。</p> <p>ab是apache自带的压力测试工具。ab非常实用，它不仅可以对apache服务器进行网站访问压力测试，也可以对或其它类型的服务器进行压力测试。比如nginx、tomcat、IIS等</p> <h2 id="ab的原理"><a href="#ab的原理" class="header-anchor">#</a> <a href="#ab%E7%9A%84%E5%8E%9F%E7%90%86">#</a> ab的原理</h2> <p>ab的原理：ab命令会创建多个并发访问线程，模拟多个访问者同时对某一URL地址进行访问。它的测试目标是基于URL的，因此，它既可以用来测试apache的负载压力，也可以测试nginx、lighthttp、tomcat、IIS等其它Web服务器的压力。</p> <p>ab命令对发出负载的计算机要求很低，它既不会占用很高CPU，也不会占用很多内存。但却会给目标服务器造成巨大的负载，其原理类似CC攻击。自己测试使用也需要注意，否则一次上太多的负载。可能造成目标服务器资源耗完，严重时甚至导致死机。</p> <h2 id="ab的安装"><a href="#ab的安装" class="header-anchor">#</a> <a href="#ab%E7%9A%84%E5%AE%89%E8%A3%85">#</a> ab的安装</h2> <div class="language-java extra-class"><pre class="language-java"><code>yum <span class="token operator">-</span>y install httpd<span class="token operator">-</span>tools
</code></pre></div><p>测试安装是否成功：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@vic html<span class="token punctuation">]</span><span class="token comment"># ab -V</span>
This is ApacheBench, Version <span class="token number">2.3</span> <span class="token operator">&lt;</span><span class="token variable">$Revision</span><span class="token builtin class-name">:</span> <span class="token number">655654</span> $<span class="token operator">&gt;</span>
Copyright <span class="token number">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/
</code></pre></div><h3 id="ab的参数说明"><a href="#ab的参数说明" class="header-anchor">#</a> <a href="#ab%E7%9A%84%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">#</a> ab的参数说明</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@vic html<span class="token punctuation">]</span><span class="token comment"># ab --help</span>
ab: wrong number of arguments
Usage: ab <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>http<span class="token punctuation">[</span>s<span class="token punctuation">]</span>://<span class="token punctuation">]</span>hostname<span class="token punctuation">[</span>:port<span class="token punctuation">]</span>/path
Options are:
    <span class="token parameter variable">-n</span> requests     Number of requests to perform
    <span class="token parameter variable">-c</span> concurrency  Number of multiple requests to <span class="token function">make</span>
    <span class="token parameter variable">-t</span> timelimit    Seconds to max. <span class="token function">wait</span> <span class="token keyword">for</span> responses
    <span class="token parameter variable">-b</span> windowsize   Size of TCP send/receive buffer, <span class="token keyword">in</span> bytes
    <span class="token parameter variable">-p</span> postfile     File containing data to POST. Remember also to <span class="token builtin class-name">set</span> <span class="token parameter variable">-T</span>
    <span class="token parameter variable">-u</span> putfile      File containing data to PUT. Remember also to <span class="token builtin class-name">set</span> <span class="token parameter variable">-T</span>
    <span class="token parameter variable">-T</span> content-type Content-type header <span class="token keyword">for</span> POSTing, eg.
                    <span class="token string">'application/x-www-form-urlencoded'</span>
                    Default is <span class="token string">'text/plain'</span>
    <span class="token parameter variable">-v</span> verbosity    How much troubleshooting info to print
    <span class="token parameter variable">-w</span>              Print out results <span class="token keyword">in</span> HTML tables
    <span class="token parameter variable">-i</span>              Use HEAD instead of GET
    <span class="token parameter variable">-x</span> attributes   String to insert as table attributes
    <span class="token parameter variable">-y</span> attributes   String to insert as <span class="token function">tr</span> attributes
    <span class="token parameter variable">-z</span> attributes   String to insert as td or th attributes
    <span class="token parameter variable">-C</span> attribute    Add cookie, eg. <span class="token string">'Apache=1234. (repeatable)
    -H attribute    Add Arbitrary header line, eg. '</span>Accept-Encoding: <span class="token function">gzip</span><span class="token string">'
                    Inserted after all normal header lines. (repeatable)
    -A attribute    Add Basic WWW Authentication, the attributes
                    are a colon separated username and password.
    -P attribute    Add Basic Proxy Authentication, the attributes
                    are a colon separated username and password.
    -X proxy:port   Proxyserver and port number to use
    -V              Print version number and exit
    -k              Use HTTP KeepAlive feature
    -d              Do not show percentiles served table.
    -S              Do not show confidence estimators and warnings.
    -g filename     Output collected data to gnuplot format file.
    -e filename     Output CSV file with percentages served
    -r              Don'</span>t <span class="token builtin class-name">exit</span> on socket receive errors.
    <span class="token parameter variable">-h</span>              Display usage information <span class="token punctuation">(</span>this message<span class="token punctuation">)</span>
    <span class="token parameter variable">-Z</span> ciphersuite  Specify SSL/TLS cipher suite <span class="token punctuation">(</span>See openssl ciphers<span class="token punctuation">)</span>
    <span class="token parameter variable">-f</span> protocol     Specify SSL/TLS protocol <span class="token punctuation">(</span>SSL2, SSL3, TLS1, or ALL<span class="token punctuation">)</span>
</code></pre></div><p>详情说明：</p> <p>-n在测试会话中所执行的请求个数。默认时，仅执行一个请求。请求的总数量</p> <p>-c一次产生的请求个数。默认是一次一个。请求的用户量</p> <p>-t测试所进行的最大秒数。其内部隐含值是-n 50000，它可以使对服务器的测试限制在一个固定的总时间以内。默认时，没有时间限制。</p> <p>-V显示版本号并退出。</p> <h2 id="性能指标"><a href="#性能指标" class="header-anchor">#</a> <a href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87">#</a> 性能指标</h2> <h3 id="吞吐量-requests-per-second"><a href="#吞吐量-requests-per-second" class="header-anchor">#</a> <a href="#%E5%90%9E%E5%90%90%E9%87%8F-requests-per-second">#</a> 吞吐量（Requests per second）</h3> <p>服务器并发处理能力的量化描述，单位是reqs/s，指的是在某个并发用户数下单位时间内处理的请求数。某个并发用户数下单位时间内能处理的最大请求数，称之为最大吞吐率。 记住：吞吐率是基于并发用户数的。这句话代表了两个含义：</p> <ul><li>吞吐率和并发用户数相关</li> <li>不同的并发用户数下，吞吐率一般是不同的</li></ul> <p>计算公式：总请求数/处理完成这些请求数所花费的时间，即</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Request per <span class="token assign-left variable">second</span><span class="token operator">=</span>Complete requests/Time taken <span class="token keyword">for</span> tests
</code></pre></div><p>必须要说明的是，这个数值表示当前机器的整体性能，值越大越好。</p> <h3 id="并发连接数-the-number-of-concurrent-connections"><a href="#并发连接数-the-number-of-concurrent-connections" class="header-anchor">#</a> <a href="#%E5%B9%B6%E5%8F%91%E8%BF%9E%E6%8E%A5%E6%95%B0-the-number-of-concurrent-connections">#</a> 并发连接数（The number of concurrent connections）</h3> <p>并发连接数指的是某个时刻服务器所接受的请求数目，简单的讲，就是一个会话。</p> <h3 id="并发用户数-concurrency-level"><a href="#并发用户数-concurrency-level" class="header-anchor">#</a> <a href="#%E5%B9%B6%E5%8F%91%E7%94%A8%E6%88%B7%E6%95%B0-concurrency-level">#</a> 并发用户数（Concurrency Level）</h3> <p>要注意区分这个概念和并发连接数之间的区别，一个用户可能同时会产生多个会话，也即连接数。在HTTP/1.1下，IE7支持两个并发连接，IE8支持6个并发连接，FireFox3支持4个并发连接，所以相应的，我们的并发用户数就得除以这个基数。</p> <h3 id="用户平均请求等待时间-time-per-request"><a href="#用户平均请求等待时间-time-per-request" class="header-anchor">#</a> <a href="#%E7%94%A8%E6%88%B7%E5%B9%B3%E5%9D%87%E8%AF%B7%E6%B1%82%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4-time-per-request">#</a> 用户平均请求等待时间（Time per request）</h3> <p>计算公式：处理完成所有请求数所花费的时间/（总请求数/并发用户数），即：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Time per <span class="token assign-left variable">request</span><span class="token operator">=</span>Time taken <span class="token keyword">for</span> tests/（Complete requests/Concurrency Level）
</code></pre></div><h3 id="服务器平均请求等待时间-time-per-request-across-all-concurrent-requests"><a href="#服务器平均请求等待时间-time-per-request-across-all-concurrent-requests" class="header-anchor">#</a> <a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B3%E5%9D%87%E8%AF%B7%E6%B1%82%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4-time-per-request-across-all-concurrent-requests">#</a> 服务器平均请求等待时间（Time per request:across all concurrent requests）</h3> <p>计算公式：处理完成所有请求数所花费的时间/总请求数，即：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Time taken for/testsComplete requests
</code></pre></div><p>可以看到，它是吞吐率的倒数。</p> <p>同时，它也等于用户平均请求等待时间/并发用户数，即Time per request/Concurrency Level</p> <h2 id="ab的应用"><a href="#ab的应用" class="header-anchor">#</a> <a href="#ab%E7%9A%84%E5%BA%94%E7%94%A8">#</a> ab的应用</h2> <p>ab的命令参数比较多，我们经常使用的是-c和-n参数。</p> <p><code>ab -c 10 -n 100 http://www.myvick.cn/index.php</code>：同时处理100个请求并运行10次index.php</p> <ul><li>-c10表示并发用户数为10</li> <li>-n100表示请求总数为100</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@vic html<span class="token punctuation">]</span><span class="token comment"># ab -c 10 -n 100 http://www.myvick.cn/index.php</span>
This is ApacheBench, Version <span class="token number">2.3</span> <span class="token operator">&lt;</span><span class="token variable">$Revision</span><span class="token builtin class-name">:</span> <span class="token number">655654</span> $<span class="token operator">&gt;</span>
Copyright <span class="token number">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking www.myvick.cn <span class="token punctuation">(</span>be patient<span class="token punctuation">)</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.done


Server Software:        nginx/1.13.6   <span class="token comment">#测试服务器的名字</span>
Server Hostname:        www.myvick.cn  <span class="token comment">#请求的URL主机名</span>
Server Port:            <span class="token number">80</span>             <span class="token comment">#web服务器监听的端口</span>

Document Path:          /index.php　　  <span class="token comment">#请求的URL中的根绝对路径，通过该文件的后缀名，我们一般可以了解该请求的类型</span>
Document Length:        <span class="token number">799</span> bytes       <span class="token comment">#HTTP响应数据的正文长度</span>

Concurrency Level:      <span class="token number">10</span>　　　　　　　　<span class="token comment"># 并发用户数，这是我们设置的参数之一</span>
Time taken <span class="token keyword">for</span> tests:   <span class="token number">0.668</span> seconds   <span class="token comment">#所有这些请求被处理完成所花费的总时间 单位秒</span>
Complete requests:      <span class="token number">100</span> 　　　　　　  <span class="token comment"># 总请求数量，这是我们设置的参数之一</span>
Failed requests:        <span class="token number">0</span>　　　　　　　　  <span class="token comment"># 表示失败的请求数量，这里的失败是指请求在连接服务器、发送数据等环节发生异常，以及无响应后超时的情况</span>
Write errors:           <span class="token number">0</span>
Total transferred:      <span class="token number">96200</span> bytes　　　 <span class="token comment">#所有请求的响应数据长度总和。包括每个HTTP响应数据的头信息和正文数据的长度</span>
HTML transferred:       <span class="token number">79900</span> bytes　　　　<span class="token comment"># 所有请求的响应数据中正文数据的总和，也就是减去了Total transferred中HTTP响应数据中的头信息的长度</span>
Requests per second:    <span class="token number">149.71</span> <span class="token punctuation">[</span><span class="token comment">#/sec] (mean) #吞吐率，计算公式：Complete requests/Time taken for tests  总请求数/处理完成这些请求数所花费的时间</span>
Time per request:       <span class="token number">66.797</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean<span class="token punctuation">)</span>   <span class="token comment"># 用户平均请求等待时间，计算公式：Time token for tests/（Complete requests/Concurrency Level）。处理完成所有请求数所花费的时间/（总请求数/并发用户数）</span>
Time per request:       <span class="token number">6.680</span> <span class="token punctuation">[</span>ms<span class="token punctuation">]</span> <span class="token punctuation">(</span>mean, across all concurrent requests<span class="token punctuation">)</span> <span class="token comment">#服务器平均请求等待时间，计算公式：Time taken for tests/Complete requests，正好是吞吐率的倒数。也可以这么统计：Time per request/Concurrency Level</span>
Transfer rate:          <span class="token number">140.64</span> <span class="token punctuation">[</span>Kbytes/sec<span class="token punctuation">]</span> received  <span class="token comment">#表示这些请求在单位时间内从服务器获取的数据长度，计算公式：Total trnasferred/ Time taken for tests，这个统计很好的说明服务器的处理能力达到极限时，其出口宽带的需求量。</span>

Connection Times <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
              min  mean<span class="token punctuation">[</span>+/-sd<span class="token punctuation">]</span> median   max
Connect:        <span class="token number">1</span>    <span class="token number">2</span>   <span class="token number">0.7</span>      <span class="token number">2</span>       <span class="token number">5</span>
Processing:     <span class="token number">2</span>   <span class="token number">26</span>  <span class="token number">81.3</span>      <span class="token number">3</span>     <span class="token number">615</span>
Waiting:        <span class="token number">1</span>   <span class="token number">26</span>  <span class="token number">81.3</span>      <span class="token number">3</span>     <span class="token number">615</span>
Total:          <span class="token number">3</span>   <span class="token number">28</span>  <span class="token number">81.3</span>      <span class="token number">6</span>     <span class="token number">618</span>

Percentage of the requests served within a certain <span class="token function">time</span> <span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
  <span class="token number">50</span>%      <span class="token number">6</span>
  <span class="token number">66</span>%      <span class="token number">6</span>
  <span class="token number">75</span>%      <span class="token number">7</span>
  <span class="token number">80</span>%      <span class="token number">7</span>
  <span class="token number">90</span>%     <span class="token number">10</span>
  <span class="token number">95</span>%    <span class="token number">209</span>
  <span class="token number">98</span>%    <span class="token number">209</span>
  <span class="token number">99</span>%    <span class="token number">618</span>
 <span class="token number">100</span>%    <span class="token number">618</span> <span class="token punctuation">(</span>longest request<span class="token punctuation">)</span>

<span class="token comment">#Percentage of requests served within a certain time（ms）这部分数据用于描述每个请求处理时间的分布情况，比如以上测试，80%的请求处理时间都不超过7ms，这个处理时间是指前面的Time per request，即对于单个用户而言，平均每个请求的处理时间</span>
</code></pre></div><h2 id="文章来源"><a href="#文章来源" class="header-anchor">#</a> <a href="#%E6%96%87%E7%AB%A0%E6%9D%A5%E6%BA%90">#</a> 文章来源</h2> <ul><li>本文转载自 https://www.cnblogs.com/myvic/p/7703973.html</li> <li>作者：myvic</li></ul> <p>参考资料：</p> <p>http://www.jb51.net/article/59469.htm</p> <p>http://blog.csdn.net/caotianyin/article/details/49253055</p> <hr> <p>著作权归@pdai所有 原文链接：https://pdai.tech/md/devops/linux/linux-ab-test.html</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/部署与工具/Linux相关/03 Linux常用.html" class="prev">
        Linux常用
      </a></span> <span class="next"><a href="/blog/部署与工具/Linux相关/05 内存分析工具pmap.html">
        内存分析工具pmap
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ba0a3011.js" defer></script><script src="/blog/assets/js/4.a5b48594.js" defer></script><script src="/blog/assets/js/57.6b65606f.js" defer></script>
  </body>
</html>
