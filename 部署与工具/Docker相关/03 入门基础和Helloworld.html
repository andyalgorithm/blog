<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker基础 - 入门基础和Helloworld | Java 全栈知识体系</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/blog/images/favorite.ico">
    <meta name="description" content="对我妻子的爱是让我不断前进的动力，使我的人生少了一份恐惧，多了一份勇气。愿[执子之手, 与子偕老  To: LQ] ">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6822ba10.css" as="style"><link rel="preload" href="/blog/assets/js/app.ba0a3011.js" as="script"><link rel="preload" href="/blog/assets/js/4.a5b48594.js" as="script"><link rel="preload" href="/blog/assets/js/19.420c5e02.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.911987ed.js"><link rel="prefetch" href="/blog/assets/js/11.8c13b615.js"><link rel="prefetch" href="/blog/assets/js/12.b17d390e.js"><link rel="prefetch" href="/blog/assets/js/13.7109526b.js"><link rel="prefetch" href="/blog/assets/js/14.e4ce975e.js"><link rel="prefetch" href="/blog/assets/js/15.da7d650d.js"><link rel="prefetch" href="/blog/assets/js/16.9635a830.js"><link rel="prefetch" href="/blog/assets/js/17.7d32a3b3.js"><link rel="prefetch" href="/blog/assets/js/18.fdb5b421.js"><link rel="prefetch" href="/blog/assets/js/2.3871e21e.js"><link rel="prefetch" href="/blog/assets/js/20.39a01f59.js"><link rel="prefetch" href="/blog/assets/js/21.4db56d7a.js"><link rel="prefetch" href="/blog/assets/js/22.a662eef6.js"><link rel="prefetch" href="/blog/assets/js/23.732a383c.js"><link rel="prefetch" href="/blog/assets/js/24.ec41e443.js"><link rel="prefetch" href="/blog/assets/js/25.860071a5.js"><link rel="prefetch" href="/blog/assets/js/26.8c4d2716.js"><link rel="prefetch" href="/blog/assets/js/27.11da77fc.js"><link rel="prefetch" href="/blog/assets/js/28.b487366d.js"><link rel="prefetch" href="/blog/assets/js/29.1803ef74.js"><link rel="prefetch" href="/blog/assets/js/3.51bdab14.js"><link rel="prefetch" href="/blog/assets/js/30.d02fbbe4.js"><link rel="prefetch" href="/blog/assets/js/31.56444d1d.js"><link rel="prefetch" href="/blog/assets/js/32.2a36d03a.js"><link rel="prefetch" href="/blog/assets/js/33.3725c3e0.js"><link rel="prefetch" href="/blog/assets/js/34.5f4e3aa4.js"><link rel="prefetch" href="/blog/assets/js/35.ef73c3f8.js"><link rel="prefetch" href="/blog/assets/js/36.fe990cea.js"><link rel="prefetch" href="/blog/assets/js/37.47682786.js"><link rel="prefetch" href="/blog/assets/js/38.baebdf75.js"><link rel="prefetch" href="/blog/assets/js/39.00ea206a.js"><link rel="prefetch" href="/blog/assets/js/40.23ec2501.js"><link rel="prefetch" href="/blog/assets/js/41.2daf7c45.js"><link rel="prefetch" href="/blog/assets/js/42.c6d1131e.js"><link rel="prefetch" href="/blog/assets/js/43.c9d5a03a.js"><link rel="prefetch" href="/blog/assets/js/44.cdc6a286.js"><link rel="prefetch" href="/blog/assets/js/45.902028e9.js"><link rel="prefetch" href="/blog/assets/js/46.553ccd2d.js"><link rel="prefetch" href="/blog/assets/js/47.f3680de2.js"><link rel="prefetch" href="/blog/assets/js/48.b3656314.js"><link rel="prefetch" href="/blog/assets/js/49.9e76608b.js"><link rel="prefetch" href="/blog/assets/js/5.a5abfe4e.js"><link rel="prefetch" href="/blog/assets/js/50.0cda1225.js"><link rel="prefetch" href="/blog/assets/js/51.84ebc08f.js"><link rel="prefetch" href="/blog/assets/js/52.943ab0ec.js"><link rel="prefetch" href="/blog/assets/js/53.81a3ff5a.js"><link rel="prefetch" href="/blog/assets/js/54.68037e26.js"><link rel="prefetch" href="/blog/assets/js/55.8ed30271.js"><link rel="prefetch" href="/blog/assets/js/56.ed07b1e0.js"><link rel="prefetch" href="/blog/assets/js/57.6b65606f.js"><link rel="prefetch" href="/blog/assets/js/58.396c2826.js"><link rel="prefetch" href="/blog/assets/js/59.396cafd6.js"><link rel="prefetch" href="/blog/assets/js/6.896d3ff4.js"><link rel="prefetch" href="/blog/assets/js/60.7468b775.js"><link rel="prefetch" href="/blog/assets/js/61.15e652da.js"><link rel="prefetch" href="/blog/assets/js/62.a3b62be1.js"><link rel="prefetch" href="/blog/assets/js/63.6341c331.js"><link rel="prefetch" href="/blog/assets/js/64.5ad96112.js"><link rel="prefetch" href="/blog/assets/js/65.c8815d96.js"><link rel="prefetch" href="/blog/assets/js/66.220d8298.js"><link rel="prefetch" href="/blog/assets/js/67.8f678d56.js"><link rel="prefetch" href="/blog/assets/js/68.86e3017e.js"><link rel="prefetch" href="/blog/assets/js/69.a732f6b2.js"><link rel="prefetch" href="/blog/assets/js/7.486b913b.js"><link rel="prefetch" href="/blog/assets/js/70.873d407a.js"><link rel="prefetch" href="/blog/assets/js/71.e40010a4.js"><link rel="prefetch" href="/blog/assets/js/72.aef34e7f.js"><link rel="prefetch" href="/blog/assets/js/73.34cb7bbc.js"><link rel="prefetch" href="/blog/assets/js/74.711ea49d.js"><link rel="prefetch" href="/blog/assets/js/75.1d427b3f.js"><link rel="prefetch" href="/blog/assets/js/8.3ff4efcd.js"><link rel="prefetch" href="/blog/assets/js/9.31831817.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6822ba10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/logo.png" alt="Java 全栈知识体系" class="logo"> <span class="site-name can-hide">Java 全栈知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable router-link-active"><span>首页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/全栈知识体系总览.html" class="sidebar-link">全栈知识体系总览</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/部署与工具" class="sidebar-heading clickable open"><span>部署与工具</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/工具和资源/" class="sidebar-heading clickable"><span>工具和资源</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/blog/部署与工具/常用开发工具详解" class="sidebar-heading clickable"><span>常用开发工具详解</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/部署与工具/常用开发工具详解/01 Git详解.html" class="sidebar-link">Git详解</a></li><li><a href="/blog/部署与工具/常用开发工具详解/02 Eclipse STS IDEA.html" class="sidebar-link">Eclipse STS IDEA</a></li><li><a href="/blog/部署与工具/常用开发工具详解/03 Maven项目构建.html" class="sidebar-link">Maven项目构建</a></li><li><a href="/blog/部署与工具/常用开发工具详解/04 Maven私有仓库Nexus.html" class="sidebar-link">Maven私有仓库Nexus</a></li><li><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html" class="sidebar-link">Jenkins+Github</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Linux相关/" class="sidebar-heading clickable"><span>Linux相关</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Docker相关/" class="sidebar-heading clickable open"><span>Docker相关</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/部署与工具/Docker相关/01 Overview.html" class="sidebar-link">Overview</a></li><li><a href="/blog/部署与工具/Docker相关/02 Docker Vs 虚拟机.html" class="sidebar-link">Docker Vs 虚拟机</a></li><li><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html" class="active sidebar-link">入门基础和Helloworld</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#docker-架构" class="sidebar-link">[#](#docker-架构) Docker 架构</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#docker-安装" class="sidebar-link">[#](#docker-安装) Docker 安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#centos-版本要求" class="sidebar-link">[#](#centos-版本要求) CentOS 版本要求</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#卸载老的docker及依赖" class="sidebar-link">[#](#卸载老的docker及依赖) 卸载老的Docker及依赖</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#安装一些依赖库" class="sidebar-link">[#](#安装一些依赖库) 安装一些依赖库</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#安装docker-ce" class="sidebar-link">[#](#安装docker-ce) 安装Docker CE</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#仓库配置" class="sidebar-link">[#](#仓库配置) 仓库配置</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#镜像查看和拉取" class="sidebar-link">[#](#镜像查看和拉取) 镜像查看和拉取</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#容器实例-ubuntu实例" class="sidebar-link">[#](#容器实例-ubuntu实例) 容器实例-ubuntu实例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#从一个ubuntu的hello-world说起" class="sidebar-link">[#](#从一个ubuntu的hello-world说起) 从一个ubuntu的hello world说起</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#运行交互式的容器" class="sidebar-link">[#](#运行交互式的容器) 运行交互式的容器</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/Docker相关/03 入门基础和Helloworld.html#运行容器至后台模式" class="sidebar-link">[#](#运行容器至后台模式) 运行容器至后台模式</a></li></ul></li></ul></li><li><a href="/blog/部署与工具/Docker相关/04 仓库 镜像 容器详解.html" class="sidebar-link">仓库 镜像 容器详解</a></li><li><a href="/blog/部署与工具/Docker相关/05 一个web应用实例.html" class="sidebar-link">一个web应用实例</a></li><li><a href="/blog/部署与工具/Docker相关/06 Docker网络使用和配置.html" class="sidebar-link">Docker网络使用和配置</a></li><li><a href="/blog/部署与工具/Docker相关/07 Docker数据卷和数据管理.html" class="sidebar-link">Docker数据卷和数据管理</a></li><li><a href="/blog/部署与工具/Docker相关/08 Dockerfile详解.html" class="sidebar-link">Dockerfile详解</a></li><li><a href="/blog/部署与工具/Docker相关/09 DockerCompose详解.html" class="sidebar-link">DockerCompose详解</a></li><li><a href="/blog/部署与工具/Docker相关/10 Docker底层实现.html" class="sidebar-link">Docker底层实现</a></li><li><a href="/blog/部署与工具/Docker相关/11 Docker安全相关.html" class="sidebar-link">Docker安全相关</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker基础-入门基础和helloworld"><a href="#docker基础-入门基础和helloworld" class="header-anchor">#</a> Docker基础 - 入门基础和Helloworld</h1> <blockquote><p>在了解了虚拟化技术和Docker之后，让我们上手Docker，看看Docker是怎么工作的。这里会介绍CentOS环境下Docker的安装和配置，以及会给你展示两个实例，给你一个直观的理解。再啰嗦下，有条件的情况下直接看<a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener noreferrer">官网在新窗口打开<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 网上资料鱼龙混杂，版本也更新不及时。@pdai</p></blockquote> <ul><li>Docker基础 - 入门基础和Helloworld
<ul><li><a href="#docker-%E6%9E%B6%E6%9E%84">Docker 架构</a></li> <li>Docker 安装
<ul><li><a href="#centos-%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82">CentOS 版本要求</a></li> <li><a href="#%E5%8D%B8%E8%BD%BD%E8%80%81%E7%9A%84docker%E5%8F%8A%E4%BE%9D%E8%B5%96">卸载老的Docker及依赖</a></li> <li><a href="#%E5%AE%89%E8%A3%85%E4%B8%80%E4%BA%9B%E4%BE%9D%E8%B5%96%E5%BA%93">安装一些依赖库</a></li> <li><a href="#%E5%AE%89%E8%A3%85docker-ce">安装Docker CE</a></li></ul></li> <li><a href="#%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE">仓库配置</a></li> <li><a href="#%E9%95%9C%E5%83%8F%E6%9F%A5%E7%9C%8B%E5%92%8C%E6%8B%89%E5%8F%96">镜像查看和拉取</a></li> <li>容器实例-ubuntu实例
<ul><li><a href="#%E4%BB%8E%E4%B8%80%E4%B8%AAubuntu%E7%9A%84hello-world%E8%AF%B4%E8%B5%B7">从一个ubuntu的hello world说起</a></li> <li><a href="#%E8%BF%90%E8%A1%8C%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%9A%84%E5%AE%B9%E5%99%A8">运行交互式的容器</a></li> <li><a href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E8%87%B3%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F">运行容器至后台模式</a></li></ul></li></ul></li></ul> <h2 id="docker-架构"><a href="#docker-架构" class="header-anchor">#</a> <a href="#docker-%E6%9E%B6%E6%9E%84">#</a> Docker 架构</h2> <blockquote><p>理解如下的一些概念，你才知道安装什么</p></blockquote> <p>Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。</p> <ul><li><strong>Docker 客户端(Client)</strong> : Docker 客户端通过命令行或者其他工具使用 Docker SDK (https://docs.docker.com/develop/sdk/) 与 Docker 的守护进程通信。</li> <li><strong>Docker 主机(Host)</strong> ：一个物理或者虚拟的机器用于执行 Docker 守护进程和容器。</li></ul> <p>Docker 包括三个基本概念:</p> <ul><li><strong>镜像（Image）</strong>：Docker 镜像（Image），就相当于是一个 root 文件系统。比如官方镜像 ubuntu:16.04 就包含了完整的一套 Ubuntu16.04 最小系统的 root 文件系统。</li> <li><strong>容器（Container）</strong>：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</li> <li><strong>仓库（Repository）</strong>：仓库可看着一个代码控制中心，用来保存镜像。</li></ul> <p><img src="/blog/assets/img/docker-x-1.6e0c333e.png" alt="img"></p> <h2 id="docker-安装"><a href="#docker-安装" class="header-anchor">#</a> <a href="#docker-%E5%AE%89%E8%A3%85">#</a> Docker 安装</h2> <blockquote><p>从 2017 年 3 月开始 docker 在原来的基础上分为两个分支版本: Docker CE 和 Docker EE：Docker CE 即社区免费版；Docker EE 即企业版，强调安全，但需付费使用；按照官网上Docker Engine - Community包现在就是叫做Docker CE。这里将展示在CentOS上安装Docker。</p></blockquote> <h3 id="centos-版本要求"><a href="#centos-版本要求" class="header-anchor">#</a> <a href="#centos-%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82">#</a> CentOS 版本要求</h3> <p>官网要求，使用CentOS7的稳定版本，同时：</p> <ul><li>启用<code>centos-extras</code></li> <li>推荐使用<code>overlay2</code>存储驱动</li></ul> <h3 id="卸载老的docker及依赖"><a href="#卸载老的docker及依赖" class="header-anchor">#</a> <a href="#%E5%8D%B8%E8%BD%BD%E8%80%81%E7%9A%84docker%E5%8F%8A%E4%BE%9D%E8%B5%96">#</a> 卸载老的Docker及依赖</h3> <blockquote><p>为什么你可能还需要删除较低的Docker安装？因为较旧版本的Docker被称为docker或docker-engine（它是一个简化Docker安装的命令行工具，通过一个简单的命令行即可在相应的平台上安装Docker，比如VirtualBox、 Digital Ocean、Microsoft Azure）</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
</code></pre></div><h3 id="安装一些依赖库"><a href="#安装一些依赖库" class="header-anchor">#</a> <a href="#%E5%AE%89%E8%A3%85%E4%B8%80%E4%BA%9B%E4%BE%9D%E8%B5%96%E5%BA%93">#</a> 安装一些依赖库</h3> <ul><li>yum-utils 提供 yum-config-manager 类库</li> <li>device-mapper-persistent-data 和 lvm2 被devicemapper 存储驱动依赖</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils <span class="token punctuation">\</span>
  device-mapper-persistent-data <span class="token punctuation">\</span>
  lvm2
</code></pre></div><p>设置稳定版本的库</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div><h3 id="安装docker-ce"><a href="#安装docker-ce" class="header-anchor">#</a> <a href="#%E5%AE%89%E8%A3%85docker-ce">#</a> 安装Docker CE</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce
</code></pre></div><p>安装完之后启动</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre></div><p>测试是否安装成功</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># systemctl status docker</span>
● docker.service - Docker Application Container Engine
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/docker.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon <span class="token number">2020</span>-02-17 <span class="token number">13</span>:57:45 CST<span class="token punctuation">;</span> 39s ago
     Docs: https://docs.docker.com
 Main PID: <span class="token number">26029</span> <span class="token punctuation">(</span>dockerd<span class="token punctuation">)</span>
    Tasks: <span class="token number">8</span>
   Memory: <span class="token number">36</span>.9M
   CGroup: /system.slice/docker.service
           └─26029 /usr/bin/dockerd <span class="token parameter variable">-H</span> fd:// <span class="token parameter variable">--containerd</span><span class="token operator">=</span>/run/containerd/containerd
</code></pre></div><h2 id="仓库配置"><a href="#仓库配置" class="header-anchor">#</a> <a href="#%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE">#</a> 仓库配置</h2> <blockquote><p>Docker 安装好以后，我们就要开始为拉取镜像准备了；国内从 DockerHub 拉取镜像有时会特别慢，此时可以<strong>配置镜像加速器</strong>。</p></blockquote> <p>Docker 官方和国内很多云服务商都提供了国内加速器服务，比如：</p> <ul><li>阿里云的加速器：https://help.aliyun.com/document_detail/60750.html</li> <li>网易加速器：http://hub-mirror.c.163.com</li> <li>Docker官方中国加速器：https://registry.docker-cn.com</li> <li>ustc 的镜像：https://docker.mirrors.ustc.edu.cn</li> <li>daocloud：https://www.daocloud.io/mirror#accelerator-doc（注册后使用）</li></ul> <p><strong>这里配置 Docker官方中国的加速器</strong>：</p> <p>对于使用 systemd 的系统，请在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件）</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span><span class="token string">&quot;registry-mirrors&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p>之后重新启动服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl daemon-reload
$ <span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre></div><h2 id="镜像查看和拉取"><a href="#镜像查看和拉取" class="header-anchor">#</a> <a href="#%E9%95%9C%E5%83%8F%E6%9F%A5%E7%9C%8B%E5%92%8C%E6%8B%89%E5%8F%96">#</a> 镜像查看和拉取</h2> <blockquote><p>拉一个docker镜像试试吧？</p></blockquote> <p>拉取hello world</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker pull hello-world:latest</span>
latest: Pulling from library/hello-world
1b930d010525: Pull complete
Digest: sha256:9572f7cdcee8591948c2963463447a53466950b3fc15a247fcad1917ca215a2f
Status: Downloaded newer image <span class="token keyword">for</span> hello-world:latest
docker.io/library/hello-world:latest
</code></pre></div><p>看本地仓库是否有这个库</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              fce289e99eb9        <span class="token number">13</span> months ago       <span class="token number">1</span>.84kB
</code></pre></div><p>运行这个镜像的实例，即容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker run hello-world</span>

Hello from Docker<span class="token operator">!</span>
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 <span class="token number">1</span>. The Docker client contacted the Docker daemon.
 <span class="token number">2</span>. The Docker daemon pulled the <span class="token string">&quot;hello-world&quot;</span> image from the Docker Hub.
    <span class="token punctuation">(</span>amd64<span class="token punctuation">)</span>
 <span class="token number">3</span>. The Docker daemon created a new container from that image <span class="token function">which</span> runs the
    executable that produces the output you are currently reading.
 <span class="token number">4</span>. The Docker daemon streamed that output to the Docker client, <span class="token function">which</span> sent it
    to your terminal.

To try something <span class="token function">more</span> ambitious, you can run an Ubuntu container with:
 $ <span class="token function">docker</span> run <span class="token parameter variable">-it</span> ubuntu <span class="token function">bash</span>

Share images, automate workflows, and <span class="token function">more</span> with a <span class="token function">free</span> Docker ID:
 https://hub.docker.com/

For <span class="token function">more</span> examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre></div><blockquote><p>注意, 如果你在没有镜像的时候，直接<code>docker run hello-world</code>也是可以的；它会先检查本地是否有这个镜像，没有的话会先从指定仓库中拉取。</p></blockquote> <h2 id="容器实例-ubuntu实例"><a href="#容器实例-ubuntu实例" class="header-anchor">#</a> <a href="#%E5%AE%B9%E5%99%A8%E5%AE%9E%E4%BE%8B-ubuntu%E5%AE%9E%E4%BE%8B">#</a> 容器实例-ubuntu实例</h2> <blockquote><p>上面我们跑了一个官方的Hello-world容器实例, 这里通过介绍运行ubuntu的实例来全面理解如何跑一个Docker实例</p></blockquote> <h3 id="从一个ubuntu的hello-world说起"><a href="#从一个ubuntu的hello-world说起" class="header-anchor">#</a> <a href="#%E4%BB%8E%E4%B8%80%E4%B8%AAubuntu%E7%9A%84hello-world%E8%AF%B4%E8%B5%B7">#</a> 从一个ubuntu的hello world说起</h3> <p>Docker 允许你在容器内运行应用程序， 使用 docker run 命令来在容器内运行一个应用程序。这里同样是个Hello World，不同在于它是在容器内部运行的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker run ubuntu:latest /bin/echo &quot;Hello world&quot;</span>
Unable to <span class="token function">find</span> image <span class="token string">'ubuntu:latest'</span> locally
latest: Pulling from library/ubuntu
5c939e3a4d10: Pull complete
c63719cdbe7a: Pull complete
19a861ea6baf: Pull complete
651c9d2d6c4f: Pull complete
Digest: sha256:8d31dad0c58f552e890d68bbfb735588b6b820a46e459672d96e585871acc110
Status: Downloaded newer image <span class="token keyword">for</span> ubuntu:latest
Hello world
</code></pre></div><p>我们看下各个参数的含义：</p> <ul><li><code>docker</code>: Docker 的二进制执行文件。</li> <li><code>run</code>: 与前面的 docker 组合来运行一个容器。</li> <li><code>ubuntu:latest</code> 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。</li> <li><code>/bin/echo &quot;Hello world&quot;</code>: 在启动的容器里执行的命令</li></ul> <p>以上命令完整的意思可以解释为：Docker 以 ubuntu 最新的（默认是latest) 镜像创建一个新容器，然后在容器里执行 bin/echo &quot;Hello world&quot;，然后输出结果。</p> <h3 id="运行交互式的容器"><a href="#运行交互式的容器" class="header-anchor">#</a> <a href="#%E8%BF%90%E8%A1%8C%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%9A%84%E5%AE%B9%E5%99%A8">#</a> 运行交互式的容器</h3> <blockquote><p>以上面例子，容器跑的是Ubuntu是一个系统实例，能否进入系统进行交互呢？</p></blockquote> <p>我们通过 docker 的两个参数 -i -t，让 docker 运行的容器实现&quot;对话&quot;的能力：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker run -i -t ubuntu:latest</span>
root@414bf796cbe4:/<span class="token comment"># echo 'hello world'</span>
hello world
root@414bf796cbe4:/<span class="token comment">#</span>
</code></pre></div><p>各个参数解析：</p> <ul><li><code>-t</code>: 在新容器内指定一个伪终端或终端。</li> <li><code>-i</code>: 允许你对容器内的标准输入 (STDIN) 进行交互。</li></ul> <p>我们可以通过运行 exit 命令或者使用 CTRL+D 来退出容器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>root@414bf796cbe4:/<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre></div><h3 id="运行容器至后台模式"><a href="#运行容器至后台模式" class="header-anchor">#</a> <a href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E8%87%B3%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F">#</a> 运行容器至后台模式</h3> <blockquote><p>我们先来看, 当我们跑完上面例子之后，我们看下后台是否有docker容器实例？</p></blockquote> <p>显然没有任何容器实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre></div><p>所以我们需要<code>-d</code>参数，来让容器实例在后台运行，比如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker run -d ubuntu:latest /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;</span>
1a51d2f023c947f2be2d9a78eb863e854ca302c89bf354654c409e23e7dd25d7
</code></pre></div><p>在输出中，我们没有看到期望的 &quot;hello world&quot;，而是一串长字符</p> <div class="language-bash extra-class"><pre class="language-bash"><code>2b1b7a428627c51ab8810d541d759f072b4fc75487eed05812646b8534a2fe63
</code></pre></div><p>这个长字符串叫做容器 ID，对每个容器来说都是唯一的，我们可以通过容器 ID 来查看对应的容器发生了什么。</p> <p>首先，我们需要确认容器有在运行，可以通过 docker ps 来查看：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES
1a51d2f023c9        ubuntu:latest       <span class="token string">&quot;/bin/sh -c 'while t…&quot;</span>   About a minute ago   Up About a minute                       gifted_brown
</code></pre></div><p>输出详情介绍：</p> <ul><li>CONTAINER ID: 容器 ID。</li> <li>IMAGE: 使用的镜像。</li> <li>COMMAND: 启动容器时运行的命令。</li> <li>CREATED: 容器的创建时间。</li> <li>STATUS: 容器状态(状态有7种)。
<ul><li>created（已创建）</li> <li>restarting（重启中）</li> <li>running（运行中）</li> <li>removing（迁移中）</li> <li>paused（暂停）</li> <li>exited（停止）</li> <li>dead（死亡）</li></ul></li> <li>PORTS: 容器的端口信息和使用的连接类型（tcp\udp）。</li> <li>NAMES: 自动分配的容器名称。</li></ul> <p>我们通过<code>docker logs</code> 命令，查看指定容器内的标准输出:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker logs 1a51d2f023c9</span>
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
hello world
</code></pre></div><p>最后我们看下，如何关闭后台实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker stop 1a51d2f023c9</span>
1a51d2f023c9
<span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
<span class="token punctuation">[</span>root@pdai ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre></div><hr> <p>著作权归@pdai所有 原文链接：https://pdai.tech/md/devops/docker/docker-02-basic.html</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/部署与工具/Docker相关/02 Docker Vs 虚拟机.html" class="prev">
        Docker Vs 虚拟机
      </a></span> <span class="next"><a href="/blog/部署与工具/Docker相关/04 仓库 镜像 容器详解.html">
        仓库 镜像 容器详解
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ba0a3011.js" defer></script><script src="/blog/assets/js/4.a5b48594.js" defer></script><script src="/blog/assets/js/19.420c5e02.js" defer></script>
  </body>
</html>
