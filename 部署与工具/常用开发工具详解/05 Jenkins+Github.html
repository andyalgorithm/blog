<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工具详解 - Jenkins+Gitlab | Java 全栈知识体系</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/blog/images/favorite.ico">
    <meta name="description" content="对我妻子的爱是让我不断前进的动力，使我的人生少了一份恐惧，多了一份勇气。愿[执子之手, 与子偕老  To: LQ] ">
    
    <link rel="preload" href="/blog/assets/css/0.styles.6822ba10.css" as="style"><link rel="preload" href="/blog/assets/js/app.ba0a3011.js" as="script"><link rel="preload" href="/blog/assets/js/4.a5b48594.js" as="script"><link rel="preload" href="/blog/assets/js/7.486b913b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.911987ed.js"><link rel="prefetch" href="/blog/assets/js/11.8c13b615.js"><link rel="prefetch" href="/blog/assets/js/12.b17d390e.js"><link rel="prefetch" href="/blog/assets/js/13.7109526b.js"><link rel="prefetch" href="/blog/assets/js/14.e4ce975e.js"><link rel="prefetch" href="/blog/assets/js/15.da7d650d.js"><link rel="prefetch" href="/blog/assets/js/16.9635a830.js"><link rel="prefetch" href="/blog/assets/js/17.7d32a3b3.js"><link rel="prefetch" href="/blog/assets/js/18.fdb5b421.js"><link rel="prefetch" href="/blog/assets/js/19.420c5e02.js"><link rel="prefetch" href="/blog/assets/js/2.3871e21e.js"><link rel="prefetch" href="/blog/assets/js/20.39a01f59.js"><link rel="prefetch" href="/blog/assets/js/21.4db56d7a.js"><link rel="prefetch" href="/blog/assets/js/22.a662eef6.js"><link rel="prefetch" href="/blog/assets/js/23.732a383c.js"><link rel="prefetch" href="/blog/assets/js/24.ec41e443.js"><link rel="prefetch" href="/blog/assets/js/25.860071a5.js"><link rel="prefetch" href="/blog/assets/js/26.8c4d2716.js"><link rel="prefetch" href="/blog/assets/js/27.11da77fc.js"><link rel="prefetch" href="/blog/assets/js/28.b487366d.js"><link rel="prefetch" href="/blog/assets/js/29.1803ef74.js"><link rel="prefetch" href="/blog/assets/js/3.51bdab14.js"><link rel="prefetch" href="/blog/assets/js/30.d02fbbe4.js"><link rel="prefetch" href="/blog/assets/js/31.56444d1d.js"><link rel="prefetch" href="/blog/assets/js/32.2a36d03a.js"><link rel="prefetch" href="/blog/assets/js/33.3725c3e0.js"><link rel="prefetch" href="/blog/assets/js/34.5f4e3aa4.js"><link rel="prefetch" href="/blog/assets/js/35.ef73c3f8.js"><link rel="prefetch" href="/blog/assets/js/36.fe990cea.js"><link rel="prefetch" href="/blog/assets/js/37.47682786.js"><link rel="prefetch" href="/blog/assets/js/38.baebdf75.js"><link rel="prefetch" href="/blog/assets/js/39.00ea206a.js"><link rel="prefetch" href="/blog/assets/js/40.23ec2501.js"><link rel="prefetch" href="/blog/assets/js/41.2daf7c45.js"><link rel="prefetch" href="/blog/assets/js/42.c6d1131e.js"><link rel="prefetch" href="/blog/assets/js/43.c9d5a03a.js"><link rel="prefetch" href="/blog/assets/js/44.cdc6a286.js"><link rel="prefetch" href="/blog/assets/js/45.902028e9.js"><link rel="prefetch" href="/blog/assets/js/46.553ccd2d.js"><link rel="prefetch" href="/blog/assets/js/47.f3680de2.js"><link rel="prefetch" href="/blog/assets/js/48.b3656314.js"><link rel="prefetch" href="/blog/assets/js/49.9e76608b.js"><link rel="prefetch" href="/blog/assets/js/5.a5abfe4e.js"><link rel="prefetch" href="/blog/assets/js/50.0cda1225.js"><link rel="prefetch" href="/blog/assets/js/51.84ebc08f.js"><link rel="prefetch" href="/blog/assets/js/52.943ab0ec.js"><link rel="prefetch" href="/blog/assets/js/53.81a3ff5a.js"><link rel="prefetch" href="/blog/assets/js/54.68037e26.js"><link rel="prefetch" href="/blog/assets/js/55.8ed30271.js"><link rel="prefetch" href="/blog/assets/js/56.ed07b1e0.js"><link rel="prefetch" href="/blog/assets/js/57.6b65606f.js"><link rel="prefetch" href="/blog/assets/js/58.396c2826.js"><link rel="prefetch" href="/blog/assets/js/59.396cafd6.js"><link rel="prefetch" href="/blog/assets/js/6.896d3ff4.js"><link rel="prefetch" href="/blog/assets/js/60.7468b775.js"><link rel="prefetch" href="/blog/assets/js/61.15e652da.js"><link rel="prefetch" href="/blog/assets/js/62.a3b62be1.js"><link rel="prefetch" href="/blog/assets/js/63.6341c331.js"><link rel="prefetch" href="/blog/assets/js/64.5ad96112.js"><link rel="prefetch" href="/blog/assets/js/65.c8815d96.js"><link rel="prefetch" href="/blog/assets/js/66.220d8298.js"><link rel="prefetch" href="/blog/assets/js/67.8f678d56.js"><link rel="prefetch" href="/blog/assets/js/68.86e3017e.js"><link rel="prefetch" href="/blog/assets/js/69.a732f6b2.js"><link rel="prefetch" href="/blog/assets/js/70.873d407a.js"><link rel="prefetch" href="/blog/assets/js/71.e40010a4.js"><link rel="prefetch" href="/blog/assets/js/72.aef34e7f.js"><link rel="prefetch" href="/blog/assets/js/73.34cb7bbc.js"><link rel="prefetch" href="/blog/assets/js/74.711ea49d.js"><link rel="prefetch" href="/blog/assets/js/75.1d427b3f.js"><link rel="prefetch" href="/blog/assets/js/8.3ff4efcd.js"><link rel="prefetch" href="/blog/assets/js/9.31831817.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.6822ba10.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/logo.png" alt="Java 全栈知识体系" class="logo"> <span class="site-name can-hide">Java 全栈知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="这是提示语" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="这是提示语" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link">
  下拉1
</a></li><li class="dropdown-item"><!----> <a href="https://u1s1.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下拉2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable router-link-active"><span>首页</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/全栈知识体系总览.html" class="sidebar-link">全栈知识体系总览</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/部署与工具" class="sidebar-heading clickable open"><span>部署与工具</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/工具和资源/" class="sidebar-heading clickable"><span>工具和资源</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/blog/部署与工具/常用开发工具详解" class="sidebar-heading clickable open"><span>常用开发工具详解</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/部署与工具/常用开发工具详解/01 Git详解.html" class="sidebar-link">Git详解</a></li><li><a href="/blog/部署与工具/常用开发工具详解/02 Eclipse STS IDEA.html" class="sidebar-link">Eclipse STS IDEA</a></li><li><a href="/blog/部署与工具/常用开发工具详解/03 Maven项目构建.html" class="sidebar-link">Maven项目构建</a></li><li><a href="/blog/部署与工具/常用开发工具详解/04 Maven私有仓库Nexus.html" class="sidebar-link">Maven私有仓库Nexus</a></li><li><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html" class="active sidebar-link">Jenkins+Github</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#jenkins的安装" class="sidebar-link">[#](#jenkins的安装) Jenkins的安装</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#gitlab的安装" class="sidebar-link">[#](#gitlab的安装) Gitlab的安装</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#自动化部署配置" class="sidebar-link">[#](#自动化部署配置) 自动化部署配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#创建普通编译job" class="sidebar-link">[#](#创建普通编译job) 创建普通编译Job</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#加入ci-trigger功能" class="sidebar-link">[#](#加入ci-trigger功能) 加入CI Trigger功能</a></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#加入cd功能" class="sidebar-link">[#](#加入cd功能) 加入CD功能</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/部署与工具/常用开发工具详解/05 Jenkins+Github.html#参考文档" class="sidebar-link">[#](#参考文档) 参考文档</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Linux相关/" class="sidebar-heading clickable"><span>Linux相关</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog/部署与工具/Docker相关/" class="sidebar-heading clickable"><span>Docker相关</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="工具详解-jenkins-gitlab"><a href="#工具详解-jenkins-gitlab" class="header-anchor">#</a> 工具详解 - Jenkins+Gitlab</h1> <blockquote><p>我在尝试在容器中安装Jenkins时，初衷是希望使用docker in docker 的模式来实现Jenkins slave容器按需创建。在实现的时候需要在Jenkins 中安装Kubernetes插件。 kubernetes的插件目前来看存在一个Bug，这个bug很小但是会导致我们无法设置和kubernetes mastert认证的机制。Bug是由于配置代理时候是用的IP地址，但是jenkins必须加入http协议，可惜的是加入http协议后更新的代理又不能使用了，进入这种死循环了。所以这种方案暂时搁置。</p></blockquote> <p>So，这里我会写常用的实现自动化部署的方案之Jenkins+Gitlab这种模式，在小型的开发时候完全够用了，从来没有一致的最佳方案，只有适不适合咱们的团队方案。</p> <ul><li>工具详解 - Jenkins+Gitlab
<ul><li><a href="#jenkins%E7%9A%84%E5%AE%89%E8%A3%85">Jenkins的安装</a></li> <li><a href="#gitlab%E7%9A%84%E5%AE%89%E8%A3%85">Gitlab的安装</a></li> <li>自动化部署配置
<ul><li>创建普通编译Job
<ul><li><a href="#jenkins%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAjob%E5%B9%B6%E9%85%8D%E7%BD%AEgit%E4%BF%A1%E6%81%AF">Jenkins创建一个Job，并配置git信息</a></li> <li><a href="#%E6%9B%B4%E6%94%B9%E6%88%90%E5%85%AC%E5%8F%B8artificatory%E9%85%8D%E7%BD%AE">更改成公司artificatory配置</a></li></ul></li> <li>加入CI Trigger功能
<ul><li><a href="#jenkins-trigger%E9%85%8D%E7%BD%AE">Jenkins Trigger配置</a></li> <li><a href="#gitlab%E9%85%8D%E7%BD%AEwebhook">Gitlab配置webhook</a></li> <li><a href="#%E6%B5%8B%E8%AF%95webhook">测试webhook:</a></li></ul></li> <li>加入CD功能
<ul><li><a href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99">自动化运行脚本编写</a></li> <li><a href="#global%E9%85%8D%E7%BD%AEssh-server">Global配置SSH Server</a></li> <li><a href="#build-job%E4%B8%AD%E9%85%8D%E7%BD%AEpostbuildover-ssh">Build Job中配置PostBuild，Over SSH</a></li> <li><a href="#%E6%9B%B4%E6%96%B0%E5%B9%B6%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81">更新并提交代码</a></li> <li><a href="#%E8%A7%A6%E5%8F%91%E7%BC%96%E8%AF%91%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2">触发编译和自动化部署</a></li> <li><a href="#tigger-build-logs">Tigger Build Logs</a></li> <li><a href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%AB%99%E6%9B%B4%E6%96%B0">查看网站更新</a></li></ul></li></ul></li> <li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3">参考文档</a></li></ul></li></ul> <h2 id="jenkins的安装"><a href="#jenkins的安装" class="header-anchor">#</a> <a href="#jenkins%E7%9A%84%E5%AE%89%E8%A3%85">#</a> Jenkins的安装</h2> <p>RedHat Linux RPM packages for Jenkins - https://pkg.jenkins.io/redhat-stable/</p> <p>To use this repository, run the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
<span class="token function">sudo</span> <span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://pkg.jenkins.io/redhat-stable/jenkins.io.key
</code></pre></div><p>If you've previously imported the key from Jenkins, the &quot;rpm --import&quot; will fail because you already have a key. Please ignore that and move on.</p> <p>You will need to explicitly install a Java runtime environment, because Oracle's Java RPMs are incorrect and fail to register as providing a java dependency. Thus, adding an explicit dependency requirement on Java would force installation of the OpenJDK JVM.</p> <p>2.54 (2017-04) and newer: Java 8 1.612 (2015-05) and newer: Java 7 With that set up, the Jenkins package can be installed with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> jenkins
</code></pre></div><p>See Wiki for more information, including how Jenkins is run and where the configuration is stored, etc.</p> <h2 id="gitlab的安装"><a href="#gitlab的安装" class="header-anchor">#</a> <a href="#gitlab%E7%9A%84%E5%AE%89%E8%A3%85">#</a> Gitlab的安装</h2> <p>自己网上找吧，但是安装8.0+的版本，因为后面webhooks是有版本的要求的。</p> <h2 id="自动化部署配置"><a href="#自动化部署配置" class="header-anchor">#</a> <a href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE">#</a> 自动化部署配置</h2> <h3 id="创建普通编译job"><a href="#创建普通编译job" class="header-anchor">#</a> <a href="#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%BC%96%E8%AF%91job">#</a> 创建普通编译Job</h3> <h4 id="jenkins创建一个job-并配置git信息"><a href="#jenkins创建一个job-并配置git信息" class="header-anchor">#</a> <a href="#jenkins%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAjob-%E5%B9%B6%E9%85%8D%E7%BD%AEgit%E4%BF%A1%E6%81%AF">#</a> Jenkins创建一个Job，并配置git信息</h4> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_4.a6038ba2.png" alt="img"></p> <blockquote><p>注意，这里连接Gitlab需要配置认证</p></blockquote> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_8.bc0bb16c.png" alt="img"></p> <blockquote><p>同时，保证jenkins机器安装了Java， maven。</p></blockquote> <p>Maven 中需要配置成我们自己的仓库，配置settings.xm即可。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># find / -name settings.xml</span>
/etc/maven/settings.xml
/var/lib/jenkins/.m2/settings.xml
/usr/share/maven/conf/settings.xml
<span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># cat /usr/share/maven/conf/settings.xml</span>
</code></pre></div><h4 id="更改成公司artificatory配置"><a href="#更改成公司artificatory配置" class="header-anchor">#</a> <a href="#%E6%9B%B4%E6%94%B9%E6%88%90%E5%85%AC%E5%8F%B8artificatory%E9%85%8D%E7%BD%AE">#</a> 更改成公司artificatory配置</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>   <span class="token operator">&lt;</span>mirror<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>mirrorId_<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/id<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>mirrorOf<span class="token operator">&gt;</span>*<span class="token operator">&lt;</span>/mirrorOf<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>Human Readable Name <span class="token keyword">for</span> this Mirror.<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>url<span class="token operator">&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token operator">&lt;</span>/url<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/mirror<span class="token operator">&gt;</span>--<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>mirror<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>mirrorId_<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/id<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>mirrorOf<span class="token operator">&gt;</span>*<span class="token operator">&lt;</span>/mirrorOf<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>Human Readable Name <span class="token keyword">for</span> this Mirror.<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>url<span class="token operator">&gt;</span>http://139.24.120.251:58086/artifactory/list/maven2/<span class="token operator">&lt;</span>/url<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/mirror<span class="token operator">&gt;</span>
</code></pre></div><h3 id="加入ci-trigger功能"><a href="#加入ci-trigger功能" class="header-anchor">#</a> <a href="#%E5%8A%A0%E5%85%A5ci-trigger%E5%8A%9F%E8%83%BD">#</a> 加入CI Trigger功能</h3> <h4 id="jenkins-trigger配置"><a href="#jenkins-trigger配置" class="header-anchor">#</a> <a href="#jenkins-trigger%E9%85%8D%E7%BD%AE">#</a> Jenkins Trigger配置</h4> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_3.c1e69ab2.png" alt="img"></p> <h4 id="gitlab配置webhook"><a href="#gitlab配置webhook" class="header-anchor">#</a> <a href="#gitlab%E9%85%8D%E7%BD%AEwebhook">#</a> Gitlab配置webhook</h4> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_1.8fdbb245.png" alt="img"></p> <h4 id="测试webhook"><a href="#测试webhook" class="header-anchor">#</a> <a href="#%E6%B5%8B%E8%AF%95webhook">#</a> 测试webhook:</h4> <p><img src="data:image/png;base64,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" alt="img"></p> <h3 id="加入cd功能"><a href="#加入cd功能" class="header-anchor">#</a> <a href="#%E5%8A%A0%E5%85%A5cd%E5%8A%9F%E8%83%BD">#</a> 加入CD功能</h3> <h4 id="自动化运行脚本编写"><a href="#自动化运行脚本编写" class="header-anchor">#</a> <a href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99">#</a> 自动化运行脚本编写</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jenkins ~<span class="token punctuation">]</span><span class="token comment"># cat run.sh</span>
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">'Checking scic document system status...'</span>
<span class="token assign-left variable">SCIC_APP_PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> scic_paas_doc <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print $2 }'</span><span class="token variable">)</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$SCIC_APP_PID</span>&quot;</span> <span class="token punctuation">]</span>
  <span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> Starting scic document<span class="token punctuation">..</span>.
      <span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> scic_paas_doc-0.0.1-RELEASE.jar <span class="token operator">&gt;</span> doc.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
      <span class="token builtin class-name">echo</span> Started successfully.
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> killing old <span class="token function">service</span> -  <span class="token variable">$SCIC_APP_PID</span> <span class="token punctuation">..</span>.
    <span class="token function">kill</span> <span class="token variable">$SCIC_APP_PID</span>
    <span class="token builtin class-name">echo</span> Restarting scic document<span class="token punctuation">..</span>.
    <span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> scic_paas_doc-0.0.1-RELEASE.jar <span class="token operator">&gt;</span> doc.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
    <span class="token builtin class-name">echo</span> Restarted successfully.
<span class="token keyword">fi</span>
</code></pre></div><h4 id="global配置ssh-server"><a href="#global配置ssh-server" class="header-anchor">#</a> <a href="#global%E9%85%8D%E7%BD%AEssh-server">#</a> Global配置SSH Server</h4> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_7.fffb24d0.png" alt="img"></p> <h4 id="build-job中配置postbuild-over-ssh"><a href="#build-job中配置postbuild-over-ssh" class="header-anchor">#</a> <a href="#build-job%E4%B8%AD%E9%85%8D%E7%BD%AEpostbuild-over-ssh">#</a> Build Job中配置PostBuild，Over SSH</h4> <p>通过SSH上传jar，并使用脚本运行</p> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_5.4f9d8daa.png" alt="img"></p> <h4 id="更新并提交代码"><a href="#更新并提交代码" class="header-anchor">#</a> <a href="#%E6%9B%B4%E6%96%B0%E5%B9%B6%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81">#</a> 更新并提交代码</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>pdai@pdai MINGW64 /d/git/k8s/scic_paas_doc <span class="token punctuation">(</span>master<span class="token punctuation">)</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
warning: LF will be replaced by CRLF <span class="token keyword">in</span> src/main/resources/static/_sidebar.md.
The <span class="token function">file</span> will have its original line endings <span class="token keyword">in</span> your working directory.

pdai@pdai MINGW64 /d/git/k8s/scic_paas_doc <span class="token punctuation">(</span>master<span class="token punctuation">)</span>
$ <span class="token function">git</span> commit
warning: LF will be replaced by CRLF <span class="token keyword">in</span> src/main/resources/static/_sidebar.md.
The <span class="token function">file</span> will have its original line endings <span class="token keyword">in</span> your working directory.
<span class="token punctuation">[</span>master warning: LF will be replaced by CRLF <span class="token keyword">in</span> src/main/resources/static/_sidebar.md.
The <span class="token function">file</span> will have its original line endings <span class="token keyword">in</span> your working directory.
50c1cc4<span class="token punctuation">]</span> <span class="token builtin class-name">test</span> trigger
warning: LF will be replaced by CRLF <span class="token keyword">in</span> src/main/resources/static/_sidebar.md.
The <span class="token function">file</span> will have its original line endings <span class="token keyword">in</span> your working directory.
 <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">1</span> insertion<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">1</span> deletion<span class="token punctuation">(</span>-<span class="token punctuation">)</span>

pdai@pdai MINGW64 /d/git/k8s/scic_paas_doc <span class="token punctuation">(</span>master<span class="token punctuation">)</span>
$ <span class="token function">git</span> push
Counting objects: <span class="token number">7</span>, done.
Delta compression using up to <span class="token number">4</span> threads.
Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">6</span>/6<span class="token punctuation">)</span>, done.
Writing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">7</span>/7<span class="token punctuation">)</span>, <span class="token number">499</span> bytes <span class="token operator">|</span> <span class="token number">0</span> bytes/s, done.
Total <span class="token number">7</span> <span class="token punctuation">(</span>delta <span class="token number">5</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>
To git@10.192.29.91:k8s_test/scic_paas_doc.git
   63b8ff4<span class="token punctuation">..</span>50c1cc4  master -<span class="token operator">&gt;</span> master
</code></pre></div><h4 id="触发编译和自动化部署"><a href="#触发编译和自动化部署" class="header-anchor">#</a> <a href="#%E8%A7%A6%E5%8F%91%E7%BC%96%E8%AF%91%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2">#</a> 触发编译和自动化部署</h4> <p><img src="/blog/assets/img/ci_action_jenkins_gitlab_6.04f7c0f1.png" alt="img"></p> <h4 id="tigger-build-logs"><a href="#tigger-build-logs" class="header-anchor">#</a> <a href="#tigger-build-logs">#</a> Tigger Build Logs</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>Started by GitLab push by daipeng
Building <span class="token keyword">in</span> workspace /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD
 <span class="token operator">&gt;</span> <span class="token function">git</span> rev-parse --is-inside-work-tree <span class="token comment"># timeout=10</span>
Fetching changes from the remote Git repository
 <span class="token operator">&gt;</span> <span class="token function">git</span> config remote.origin.url git@10.192.29.91:k8s_test/scic_paas_doc.git <span class="token comment"># timeout=10</span>
Fetching upstream changes from git@10.192.29.91:k8s_test/scic_paas_doc.git
 <span class="token operator">&gt;</span> <span class="token function">git</span> <span class="token parameter variable">--version</span> <span class="token comment"># timeout=10</span>
using GIT_SSH to <span class="token builtin class-name">set</span> credentials jenkins master server key
 <span class="token operator">&gt;</span> <span class="token function">git</span> fetch <span class="token parameter variable">--tags</span> <span class="token parameter variable">--progress</span> git@10.192.29.91:k8s_test/scic_paas_doc.git +refs/heads/*:refs/remotes/origin/*
 <span class="token operator">&gt;</span> <span class="token function">git</span> rev-parse remotes/origin/master^<span class="token punctuation">{</span>commit<span class="token punctuation">}</span> <span class="token comment"># timeout=10</span>
 <span class="token operator">&gt;</span> <span class="token function">git</span> branch <span class="token parameter variable">-a</span> <span class="token parameter variable">-v</span> --no-abbrev <span class="token parameter variable">--contains</span> 50c1cc4499394d70919a470db5961cec00e65457 <span class="token comment"># timeout=10</span>
Checking out Revision 50c1cc4499394d70919a470db5961cec00e65457 <span class="token punctuation">(</span>origin/master<span class="token punctuation">)</span>
Commit message: <span class="token string">&quot;test trigger&quot;</span>
 <span class="token operator">&gt;</span> <span class="token function">git</span> config core.sparsecheckout <span class="token comment"># timeout=10</span>
 <span class="token operator">&gt;</span> <span class="token function">git</span> checkout <span class="token parameter variable">-f</span> 50c1cc4499394d70919a470db5961cec00e65457
 <span class="token operator">&gt;</span> <span class="token function">git</span> rev-list 99d919b08d5a2010fe750d4d920a10024401bc92 <span class="token comment"># timeout=10</span>
<span class="token punctuation">[</span>SCIC_DOC_TRIGGER_BUILD<span class="token punctuation">]</span> $ /bin/sh <span class="token parameter variable">-xe</span> /tmp/jenkins3779972667920467885.sh
+ mvn package
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>                                                                         
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building pass_doc <span class="token number">0.0</span>.1-RELEASE
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.6:resources <span class="token punctuation">(</span>default-resources<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Copying <span class="token number">1</span> resource
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Copying <span class="token number">71</span> resources
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.1:compile <span class="token punctuation">(</span>default-compile<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Nothing to compile - all classes are up to <span class="token function">date</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-resources-plugin:2.6:testResources <span class="token punctuation">(</span>default-testResources<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Using <span class="token string">'UTF-8'</span> encoding to copy filtered resources.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> skip non existing resourceDirectory /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD/src/test/resources
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-compiler-plugin:3.1:testCompile <span class="token punctuation">(</span>default-testCompile<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> No sources to compile
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-surefire-plugin:2.18.1:test <span class="token punctuation">(</span>default-test<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> No tests to run.
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-jar-plugin:2.6:jar <span class="token punctuation">(</span>default-jar<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building jar: /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD/target/scic_paas_doc-0.0.1-RELEASE.jar
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- spring-boot-maven-plugin:1.4.1.RELEASE:repackage <span class="token punctuation">(</span>default<span class="token punctuation">)</span> @ scic_paas_doc ---
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time: <span class="token number">3</span>.695s
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: Fri Jul <span class="token number">28</span> 09:15:43 CST <span class="token number">2017</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Final Memory: 16M/237M
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------
SSH: Connecting from <span class="token function">host</span> <span class="token punctuation">[</span>jenkins<span class="token punctuation">]</span>
SSH: Connecting with configuration <span class="token punctuation">[</span>PAAS_DOC_SERVER_200<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
SSH: EXEC: STDOUT/STDERR from <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>/root/run.sh<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
Checking scic document system status<span class="token punctuation">..</span>.
killing old <span class="token function">service</span> - <span class="token number">19970</span> <span class="token punctuation">..</span>.
Restarting scic document<span class="token punctuation">..</span>.
Restarted successfully.
SSH: EXEC: completed after <span class="token number">200</span> ms
SSH: Disconnecting configuration <span class="token punctuation">[</span>PAAS_DOC_SERVER_200<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
SSH: Transferred <span class="token number">1</span> file<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
Finished: SUCCESS
</code></pre></div><h4 id="查看网站更新"><a href="#查看网站更新" class="header-anchor">#</a> <a href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%AB%99%E6%9B%B4%E6%96%B0">#</a> 查看网站更新</h4> <p>发现确实已经更新 啦。</p> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> <a href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3">#</a> 参考文档</h2> <p>https://jenkins.io/doc/pipeline/tour/hello-world/</p> <p>https://jenkins.io/user-handbook.pdf</p> <p>http://www.cnblogs.com/kevingrace/p/5651447.html</p> <p>http://www.cnblogs.com/ceshi2016/p/6529557.html</p> <p>http://linuxsogood.org/1539.html</p> <p>http://www.mamicode.com/info-detail-1264849.html</p> <p>http://blog.didispace.com/spring-boot-run-backend/</p> <hr> <p>著作权归@pdai所有 原文链接：https://pdai.tech/md/devops/tool/tool-jenkins-gitlab.html</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/部署与工具/常用开发工具详解/04 Maven私有仓库Nexus.html" class="prev">
        Maven私有仓库Nexus
      </a></span> <span class="next"><a href="/blog/部署与工具/Linux相关/01 Linux基础知识.html">
        Linux基础知识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.ba0a3011.js" defer></script><script src="/blog/assets/js/4.a5b48594.js" defer></script><script src="/blog/assets/js/7.486b913b.js" defer></script>
  </body>
</html>
